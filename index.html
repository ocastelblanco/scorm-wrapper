<!DOCTYPE html>
<html lang="es">

<head>
  <title>Parent ejemplo</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/css/bootstrap.min.css"
        rel="stylesheet"
        integrity="sha384-4bw+/aepP/YC94hEpVNVgiZdgIC5+VKNBQNGCHeKRQN+PtmoHDEXuppvnDJzQIu9"
        crossorigin="anonymous">
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/js/bootstrap.bundle.min.js"
          integrity="sha384-HwwvtgBNo3bZJJLYd8oVXjrBZt8cqVSpeBNS5n7C8IVInixGAoxmnlMuBnhbgrkm"
          crossorigin="anonymous"></script>
  <style>
    body {
      margin: 0;
    }

    iframe {
      width: 100vw;
      height: 100vh;
      border: none;
      position: absolute;
      top: 0;
      left: 0;
      z-index: 2;
    }

    .selector {
      position: fixed;
      top: 0;
      left: 0;
      display: flex;
      justify-content: center;
      align-items: flex-start;
      z-index: 3;
    }

    .btn-group {
      background-color: white;
    }

    .spinner {
      display: flex;
      justify-content: center;
      align-items: center;
      position: fixed;
      top: 0;
      left: 0;
      width: 100vw;
      height: 100vh;
      z-index: 1;
    }

    .spinner-border {
      width: 50px;
      height: 50px;
    }
  </style>
</head>

<body>
  <div class="spinner">
    <div class="spinner-border text-primary"
         role="status">
      <span class="visually-hidden">Cargando...</span>
    </div>
  </div>
  <div class="selector container-fluid">
    <div class="btn-group"
         role="group"
         aria-label="Basic radio toggle button group">
      <input type="radio"
             class="btn-check"
             name="btnradio"
             id="btnradio1"
             autocomplete="off"
             onclick="cambiaRecurso(0)"
             checked>
      <label class="btn btn-outline-primary"
             for="btnradio1">mAuthor vacío</label>
      <input type="radio"
             class="btn-check"
             name="btnradio"
             id="btnradio2"
             autocomplete="off"
             onclick="cambiaRecurso(1)">
      <label class="btn btn-outline-primary"
             for="btnradio2">mAuthor con datos</label>
      <input type="radio"
             class="btn-check"
             name="btnradio"
             id="btnradio3"
             onclick="cambiaRecurso(2)"
             autocomplete="off">
      <label class="btn btn-outline-primary"
             for="btnradio3">Articulate vacío</label>
      <input type="radio"
             class="btn-check"
             name="btnradio"
             id="btnradio4"
             onclick="cambiaRecurso(3)"
             autocomplete="off">
      <label class="btn btn-outline-primary"
             for="btnradio4">Articulate con datos</label>
      <input type="radio"
             class="btn-check"
             name="btnradio"
             id="btnradio5"
             onclick="cambiaRecurso(4)"
             autocomplete="off">
      <label class="btn btn-outline-primary"
             for="btnradio5">Capturador de clics</label>
    </div>
  </div>
  <script>
    // Los tipos de ejemplo
    const recursos = ['mauthor_vacio', 'mauthor_datos', 'articulate_vacio', 'articulate_datos', 'clic'];
    // 0 = mAuthor, 1 = Articulate
    let recurso = recursos[0];
    // Un objeto de ejemplo con las tres variables básicas que está esperando el mAuthor y el Articulate. Vienen desde el Backend
    const obj = {
      'mauthor_vacio': {
        "cmi.suspend_data": "",
        "cmi.location": "",
        "cmi.completion_status": ""
      },
      'mauthor_datos': {
        "cmi.completion_status": "completed",
        "cmi.mode": "areview",
        "cmi.exit": "suspend",
        "cmi.score.max": "100",
        "cmi.score.min": "0",
        "cmi.score.raw": "32",
        "cmi.score.scaled": "0,32",
        "cmi.session_time": "PT195.59S",
        "cmi.success_status": "passed",
        "cmi.suspend_data": "{\"state\":\"{\\\"GRVMoAQGAZ7wRE0Lpage_navigation_page_anchor10\\\":\\\"{\\\\\\\"isVisible\\\\\\\":true}\\\", \\\"GRVMoAQGAZ7wRE0Lpage_navigation_page_anchor9\\\":\\\"{\\\\\\\"isVisible\\\\\\\":true}\\\", \\\"GRVMoAQGAZ7wRE0Lpage_navigation_page_anchor8\\\":\\\"{\\\\\\\"isVisible\\\\\\\":true}\\\", \\\"GRVMoAQGAZ7wRE0Lpage_navigation_page_anchor7\\\":\\\"{\\\\\\\"isVisible\\\\\\\":true}\\\", \\\"GRVMoAQGAZ7wRE0Lpage_navigation_page_anchor6\\\":\\\"{\\\\\\\"isVisible\\\\\\\":true}\\\", \\\"GRVMoAQGAZ7wRE0Lpage_navigation_page_anchor5\\\":\\\"{\\\\\\\"isVisible\\\\\\\":true}\\\", \\\"GRVMoAQGAZ7wRE0Lpage_navigation_page_anchor4\\\":\\\"{\\\\\\\"isVisible\\\\\\\":true}\\\", \\\"GRVMoAQGAZ7wRE0Lpage_navigation_page_anchor3\\\":\\\"{\\\\\\\"isVisible\\\\\\\":true}\\\", \\\"GRVMoAQGAZ7wRE0Lpage_navigation_page_anchor2\\\":\\\"{\\\\\\\"isVisible\\\\\\\":true}\\\", \\\"GRVMoAQGAZ7wRE0Lpage_navigation_page_anchor1\\\":\\\"{\\\\\\\"isVisible\\\\\\\":true}\\\", \\\"GRVMoAQGAZ7wRE0LText2\\\":\\\"{\\\\\\\"gapUniqueId\\\\\\\":\\\\\\\"6abO8q\\\\\\\", \\\\\\\"values\\\\\\\":\\\\\\\"{}\\\\\\\", \\\\\\\"consumed\\\\\\\":\\\\\\\"{}\\\\\\\", \\\\\\\"disabled\\\\\\\":\\\\\\\"[]\\\\\\\", \\\\\\\"isVisible\\\\\\\":\\\\\\\"true\\\\\\\", \\\\\\\"droppedElements\\\\\\\":\\\\\\\"{}\\\\\\\", \\\\\\\"hasBeenAccessed\\\\\\\":\\\\\\\"{}\\\\\\\"}\\\", \\\"GRVMoAQGAZ7wRE0LText40\\\":\\\"{\\\\\\\"gapUniqueId\\\\\\\":\\\\\\\"LXCNLX\\\\\\\", \\\\\\\"values\\\\\\\":\\\\\\\"{}\\\\\\\", \\\\\\\"consumed\\\\\\\":\\\\\\\"{}\\\\\\\", \\\\\\\"disabled\\\\\\\":\\\\\\\"[]\\\\\\\", \\\\\\\"isVisible\\\\\\\":\\\\\\\"true\\\\\\\", \\\\\\\"droppedElements\\\\\\\":\\\\\\\"{}\\\\\\\", \\\\\\\"hasBeenAccessed\\\\\\\":\\\\\\\"{}\\\\\\\"}\\\", \\\"GRVMoAQGAZ7wRE0LText3\\\":\\\"{\\\\\\\"gapUniqueId\\\\\\\":\\\\\\\"LDhi1Q\\\\\\\", \\\\\\\"values\\\\\\\":\\\\\\\"{}\\\\\\\", \\\\\\\"consumed\\\\\\\":\\\\\\\"{}\\\\\\\", \\\\\\\"disabled\\\\\\\":\\\\\\\"[]\\\\\\\", \\\\\\\"isVisible\\\\\\\":\\\\\\\"true\\\\\\\", \\\\\\\"droppedElements\\\\\\\":\\\\\\\"{}\\\\\\\", \\\\\\\"hasBeenAccessed\\\\\\\":\\\\\\\"{}\\\\\\\"}\\\", \\\"GRVMoAQGAZ7wRE0LText36\\\":\\\"{\\\\\\\"gapUniqueId\\\\\\\":\\\\\\\"yfDQ2L\\\\\\\", \\\\\\\"values\\\\\\\":\\\\\\\"{}\\\\\\\", \\\\\\\"consumed\\\\\\\":\\\\\\\"{}\\\\\\\", \\\\\\\"disabled\\\\\\\":\\\\\\\"[]\\\\\\\", \\\\\\\"isVisible\\\\\\\":\\\\\\\"true\\\\\\\", \\\\\\\"droppedElements\\\\\\\":\\\\\\\"{}\\\\\\\", \\\\\\\"hasBeenAccessed\\\\\\\":\\\\\\\"{}\\\\\\\"}\\\", \\\"GRVMoAQGAZ7wRE0LShape12\\\":\\\"{\\\\\\\"isVisible\\\\\\\":\\\\\\\"true\\\\\\\"}\\\", \\\"GRVMoAQGAZ7wRE0LText8\\\":\\\"{\\\\\\\"gapUniqueId\\\\\\\":\\\\\\\"i2KzbI\\\\\\\", \\\\\\\"values\\\\\\\":\\\\\\\"{}\\\\\\\", \\\\\\\"consumed\\\\\\\":\\\\\\\"{}\\\\\\\", \\\\\\\"disabled\\\\\\\":\\\\\\\"[]\\\\\\\", \\\\\\\"isVisible\\\\\\\":\\\\\\\"true\\\\\\\", \\\\\\\"droppedElements\\\\\\\":\\\\\\\"{}\\\\\\\", \\\\\\\"hasBeenAccessed\\\\\\\":\\\\\\\"{}\\\\\\\"}\\\", \\\"GRVMoAQGAZ7wRE0LAdvanced_Connector2\\\":\\\"\\\", \\\"GRVMoAQGAZ7wRE0LShape2\\\":\\\"{\\\\\\\"isVisible\\\\\\\":\\\\\\\"true\\\\\\\"}\\\", \\\"GRVMoAQGAZ7wRE0LShape8\\\":\\\"{\\\\\\\"isVisible\\\\\\\":\\\\\\\"true\\\\\\\"}\\\", \\\"GRVMoAQGAZ7wRE0LConnection1\\\":\\\"{\\\\\\\"id\\\\\\\":[\\\\\\\"6:f\\\\\\\",\\\\\\\"2:b\\\\\\\",\\\\\\\"1:e\\\\\\\",\\\\\\\"3:a\\\\\\\",\\\\\\\"4:d\\\\\\\",\\\\\\\"5:c\\\\\\\"],\\\\\\\"isVisible\\\\\\\":true}\\\", \\\"GRVMoAQGAZ7wRE0LText9\\\":\\\"{\\\\\\\"gapUniqueId\\\\\\\":\\\\\\\"R699X7\\\\\\\", \\\\\\\"values\\\\\\\":\\\\\\\"{}\\\\\\\", \\\\\\\"consumed\\\\\\\":\\\\\\\"{}\\\\\\\", \\\\\\\"disabled\\\\\\\":\\\\\\\"[]\\\\\\\", \\\\\\\"isVisible\\\\\\\":\\\\\\\"true\\\\\\\", \\\\\\\"droppedElements\\\\\\\":\\\\\\\"{}\\\\\\\", \\\\\\\"hasBeenAccessed\\\\\\\":\\\\\\\"{}\\\\\\\"}\\\", \\\"GRVMoAQGAZ7wRE0LChoice2\\\":\\\"{\\\\\\\"options\\\\\\\":\\\\\\\"10001\\\\\\\", \\\\\\\"isDisabled\\\\\\\":\\\\\\\"false\\\\\\\", \\\\\\\"isVisible\\\\\\\":\\\\\\\"true\\\\\\\"}\\\", \\\"GRVMoAQGAZ7wRE0LokA\\\":\\\"{\\\\\\\"isSelected\\\\\\\":false,\\\\\\\"isVisible\\\\\\\":false,\\\\\\\"isDisabled\\\\\\\":false}\\\", \\\"GRVMoAQGAZ7wRE0LText12\\\":\\\"{\\\\\\\"gapUniqueId\\\\\\\":\\\\\\\"gcR5mb\\\\\\\", \\\\\\\"values\\\\\\\":\\\\\\\"{}\\\\\\\", \\\\\\\"consumed\\\\\\\":\\\\\\\"{}\\\\\\\", \\\\\\\"disabled\\\\\\\":\\\\\\\"[]\\\\\\\", \\\\\\\"isVisible\\\\\\\":\\\\\\\"true\\\\\\\", \\\\\\\"droppedElements\\\\\\\":\\\\\\\"{}\\\\\\\", \\\\\\\"hasBeenAccessed\\\\\\\":\\\\\\\"{}\\\\\\\"}\\\", \\\"GRVMoAQGAZ7wRE0LChoice3\\\":\\\"{\\\\\\\"options\\\\\\\":\\\\\\\"011000\\\\\\\", \\\\\\\"isDisabled\\\\\\\":\\\\\\\"false\\\\\\\", \\\\\\\"isVisible\\\\\\\":\\\\\\\"true\\\\\\\"}\\\", \\\"GRVMoAQGAZ7wRE0LokB\\\":\\\"{\\\\\\\"isSelected\\\\\\\":false,\\\\\\\"isVisible\\\\\\\":false,\\\\\\\"isDisabled\\\\\\\":false}\\\", \\\"GRVMoAQGAZ7wRE0LAdvanced_Connector3\\\":\\\"\\\", \\\"GRVMoAQGAZ7wRE0LText6\\\":\\\"{\\\\\\\"gapUniqueId\\\\\\\":\\\\\\\"Ly7M1N\\\\\\\", \\\\\\\"values\\\\\\\":\\\\\\\"{}\\\\\\\", \\\\\\\"consumed\\\\\\\":\\\\\\\"{}\\\\\\\", \\\\\\\"disabled\\\\\\\":\\\\\\\"[]\\\\\\\", \\\\\\\"isVisible\\\\\\\":\\\\\\\"true\\\\\\\", \\\\\\\"droppedElements\\\\\\\":\\\\\\\"{}\\\\\\\", \\\\\\\"hasBeenAccessed\\\\\\\":\\\\\\\"{}\\\\\\\"}\\\", \\\"GRVMoAQGAZ7wRE0LText1\\\":\\\"{\\\\\\\"gapUniqueId\\\\\\\":\\\\\\\"hXFvCW\\\\\\\", \\\\\\\"values\\\\\\\":\\\\\\\"{}\\\\\\\", \\\\\\\"consumed\\\\\\\":\\\\\\\"{}\\\\\\\", \\\\\\\"disabled\\\\\\\":\\\\\\\"[]\\\\\\\", \\\\\\\"isVisible\\\\\\\":\\\\\\\"true\\\\\\\", \\\\\\\"droppedElements\\\\\\\":\\\\\\\"{}\\\\\\\", \\\\\\\"hasBeenAccessed\\\\\\\":\\\\\\\"{}\\\\\\\"}\\\", \\\"GRVMoAQGAZ7wRE0LChoice4\\\":\\\"{\\\\\\\"options\\\\\\\":\\\\\\\"0110\\\\\\\", \\\\\\\"isDisabled\\\\\\\":\\\\\\\"false\\\\\\\", \\\\\\\"isVisible\\\\\\\":\\\\\\\"true\\\\\\\"}\\\", \\\"GRVMoAQGAZ7wRE0LAdvanced_Connector4\\\":\\\"\\\", \\\"GRVMoAQGAZ7wRE0LokD\\\":\\\"{\\\\\\\"isSelected\\\\\\\":false,\\\\\\\"isVisible\\\\\\\":false,\\\\\\\"isDisabled\\\\\\\":false}\\\", \\\"GRVMoAQGAZ7wRE0LShape18\\\":\\\"{\\\\\\\"isVisible\\\\\\\":\\\\\\\"true\\\\\\\"}\\\", \\\"GRVMoAQGAZ7wRE0LShape10\\\":\\\"{\\\\\\\"isVisible\\\\\\\":\\\\\\\"true\\\\\\\"}\\\", \\\"GRVMoAQGAZ7wRE0LShape11\\\":\\\"{\\\\\\\"isVisible\\\\\\\":\\\\\\\"true\\\\\\\"}\\\", \\\"GRVMoAQGAZ7wRE0LShape19\\\":\\\"{\\\\\\\"isVisible\\\\\\\":\\\\\\\"true\\\\\\\"}\\\", \\\"GRVMoAQGAZ7wRE0LShape20\\\":\\\"{\\\\\\\"isVisible\\\\\\\":\\\\\\\"true\\\\\\\"}\\\", \\\"GRVMoAQGAZ7wRE0LShape22\\\":\\\"{\\\\\\\"isVisible\\\\\\\":\\\\\\\"true\\\\\\\"}\\\", \\\"GRVMoAQGAZ7wRE0LShape23\\\":\\\"{\\\\\\\"isVisible\\\\\\\":\\\\\\\"true\\\\\\\"}\\\", \\\"GRVMoAQGAZ7wRE0LShape24\\\":\\\"{\\\\\\\"isVisible\\\\\\\":\\\\\\\"true\\\\\\\"}\\\", \\\"GRVMoAQGAZ7wRE0LText11\\\":\\\"{\\\\\\\"gapUniqueId\\\\\\\":\\\\\\\"k1qxLY\\\\\\\", \\\\\\\"values\\\\\\\":\\\\\\\"{\\\\\\\\\\\\\\\"k1qxLY-1\\\\\\\\\\\\\\\":\\\\\\\\\\\\\\\"revolución\\\\\\\\\\\\\\\", \\\\\\\\\\\\\\\"k1qxLY-2\\\\\\\\\\\\\\\":\\\\\\\\\\\\\\\"5000\\\\\\\\\\\\\\\", \\\\\\\\\\\\\\\"k1qxLY-3\\\\\\\\\\\\\\\":\\\\\\\\\\\\\\\"agricultura\\\\\\\\\\\\\\\", \\\\\\\\\\\\\\\"k1qxLY-4\\\\\\\\\\\\\\\":\\\\\\\\\\\\\\\"nómadas\\\\\\\\\\\\\\\", \\\\\\\\\\\\\\\"k1qxLY-5\\\\\\\\\\\\\\\":\\\\\\\\\\\\\\\"alimentos\\\\\\\\\\\\\\\", \\\\\\\\\\\\\\\"k1qxLY-6\\\\\\\\\\\\\\\":\\\\\\\\\\\\\\\"número\\\\\\\\\\\\\\\", \\\\\\\\\\\\\\\"k1qxLY-7\\\\\\\\\\\\\\\":\\\\\\\\\\\\\\\"seguridad\\\\\\\\\\\\\\\", \\\\\\\\\\\\\\\"k1qxLY-8\\\\\\\\\\\\\\\":\\\\\\\\\\\\\\\"poblados\\\\\\\\\\\\\\\"}\\\\\\\", \\\\\\\"consumed\\\\\\\":\\\\\\\"{\\\\\\\\\\\\\\\"k1qxLY-1\\\\\\\\\\\\\\\":\\\\\\\\\\\\\\\"Source_list5-1@revolución\\\\\\\\\\\\\\\", \\\\\\\\\\\\\\\"k1qxLY-2\\\\\\\\\\\\\\\":\\\\\\\\\\\\\\\"Source_list5-2@5000\\\\\\\\\\\\\\\", \\\\\\\\\\\\\\\"k1qxLY-3\\\\\\\\\\\\\\\":\\\\\\\\\\\\\\\"Source_list5-3@agricultura\\\\\\\\\\\\\\\", \\\\\\\\\\\\\\\"k1qxLY-4\\\\\\\\\\\\\\\":\\\\\\\\\\\\\\\"Source_list5-4@nómadas\\\\\\\\\\\\\\\", \\\\\\\\\\\\\\\"k1qxLY-5\\\\\\\\\\\\\\\":\\\\\\\\\\\\\\\"Source_list5-5@alimentos\\\\\\\\\\\\\\\", \\\\\\\\\\\\\\\"k1qxLY-6\\\\\\\\\\\\\\\":\\\\\\\\\\\\\\\"Source_list5-6@número\\\\\\\\\\\\\\\", \\\\\\\\\\\\\\\"k1qxLY-7\\\\\\\\\\\\\\\":\\\\\\\\\\\\\\\"Source_list5-7@seguridad\\\\\\\\\\\\\\\", \\\\\\\\\\\\\\\"k1qxLY-8\\\\\\\\\\\\\\\":\\\\\\\\\\\\\\\"Source_list5-8@poblados\\\\\\\\\\\\\\\"}\\\\\\\", \\\\\\\"disabled\\\\\\\":\\\\\\\"[false,false,false,false,false,false,false,false]\\\\\\\", \\\\\\\"isVisible\\\\\\\":\\\\\\\"true\\\\\\\", \\\\\\\"droppedElements\\\\\\\":\\\\\\\"{\\\\\\\\\\\\\\\"k1qxLY-1\\\\\\\\\\\\\\\":\\\\\\\\\\\\\\\"&lt;div class=&quot;ic_sourceListItem ui-draggable ic_sourceListItem-selected ui-draggable-dragging&quot; style=&quot;display: inline-block; white-space: nowrap; position: absolute; z-index: 100; width: 195px; height: 25px; left: -373px; top: 255px;&quot;&gt;revolución&lt;/div&gt;\\\\\\\\\\\\\\\", \\\\\\\\\\\\\\\"k1qxLY-2\\\\\\\\\\\\\\\":\\\\\\\\\\\\\\\"&lt;div class=&quot;ic_sourceListItem ui-draggable ic_sourceListItem-selected ui-draggable-dragging&quot; style=&quot;display: inline-block; white-space: nowrap; position: absolute; z-index: 100; width: 195px; height: 25px; left: 112px; top: 266px;&quot;&gt;5000&lt;/div&gt;\\\\\\\\\\\\\\\", \\\\\\\\\\\\\\\"k1qxLY-3\\\\\\\\\\\\\\\":\\\\\\\\\\\\\\\"&lt;div class=&quot;ic_sourceListItem ui-draggable ic_sourceListItem-selected ui-draggable-dragging&quot; style=&quot;display: inline-block; white-space: nowrap; position: absolute; z-index: 100; width: 195px; height: 25px; left: -108px; top: 306px;&quot;&gt;agricultura&lt;/div&gt;\\\\\\\\\\\\\\\", \\\\\\\\\\\\\\\"k1qxLY-4\\\\\\\\\\\\\\\":\\\\\\\\\\\\\\\"&lt;div class=&quot;ic_sourceListItem ui-draggable ic_sourceListItem-selected ui-draggable-dragging&quot; style=&quot;display: inline-block; white-space: nowrap; position: absolute; z-index: 100; width: 195px; height: 25px; left: -428px; top: 347px;&quot;&gt;nómadas&lt;/div&gt;\\\\\\\\\\\\\\\", \\\\\\\\\\\\\\\"k1qxLY-5\\\\\\\\\\\\\\\":\\\\\\\\\\\\\\\"&lt;div class=&quot;ic_sourceListItem ui-draggable ic_sourceListItem-selected ui-draggable-dragging&quot; style=&quot;display: inline-block; white-space: nowrap; position: absolute; z-index: 100; width: 195px; height: 25px; left: 74px; top: 346px;&quot;&gt;alimentos&lt;/div&gt;\\\\\\\\\\\\\\\", \\\\\\\\\\\\\\\"k1qxLY-6\\\\\\\\\\\\\\\":\\\\\\\\\\\\\\\"&lt;div class=&quot;ic_sourceListItem ui-draggable ic_sourceListItem-selected ui-draggable-dragging&quot; style=&quot;display: inline-block; white-space: nowrap; position: absolute; z-index: 100; width: 195px; height: 25px; left: -459px; top: 402px;&quot;&gt;número&lt;/div&gt;\\\\\\\\\\\\\\\", \\\\\\\\\\\\\\\"k1qxLY-7\\\\\\\\\\\\\\\":\\\\\\\\\\\\\\\"&lt;div class=&quot;ic_sourceListItem ui-draggable ic_sourceListItem-selected ui-draggable-dragging&quot; style=&quot;display: inline-block; white-space: nowrap; position: absolute; z-index: 100; width: 195px; height: 25px; left: 88px; top: 392px;&quot;&gt;seguridad&lt;/div&gt;\\\\\\\\\\\\\\\", \\\\\\\\\\\\\\\"k1qxLY-8\\\\\\\\\\\\\\\":\\\\\\\\\\\\\\\"&lt;div class=&quot;ic_sourceListItem ui-draggable ic_sourceListItem-selected ui-draggable-dragging&quot; style=&quot;display: inline-block; white-space: nowrap; position: absolute; z-index: 100; width: 195px; height: 25px; left: -481px; top: 492px;&quot;&gt;poblados&lt;/div&gt;\\\\\\\\\\\\\\\"}\\\\\\\", \\\\\\\"hasBeenAccessed\\\\\\\":\\\\\\\"{}\\\\\\\"}\\\", \\\"GRVMoAQGAZ7wRE0LSource_list5\\\":\\\"{\\\\\\\"stateVersion\\\\\\\":\\\\\\\"1\\\\\\\", \\\\\\\"isVisible\\\\\\\":\\\\\\\"true\\\\\\\", \\\\\\\"items\\\\\\\":\\\\\\\"[]\\\\\\\"}\\\", \\\"GRVMoAQGAZ7wRE0LShape32\\\":\\\"{\\\\\\\"isVisible\\\\\\\":\\\\\\\"true\\\\\\\"}\\\", \\\"GRVMoAQGAZ7wRE0LText15\\\":\\\"{\\\\\\\"gapUniqueId\\\\\\\":\\\\\\\"QRIiQQ\\\\\\\", \\\\\\\"values\\\\\\\":\\\\\\\"{}\\\\\\\", \\\\\\\"consumed\\\\\\\":\\\\\\\"{}\\\\\\\", \\\\\\\"disabled\\\\\\\":\\\\\\\"[]\\\\\\\", \\\\\\\"isVisible\\\\\\\":\\\\\\\"true\\\\\\\", \\\\\\\"droppedElements\\\\\\\":\\\\\\\"{}\\\\\\\", \\\\\\\"hasBeenAccessed\\\\\\\":\\\\\\\"{}\\\\\\\"}\\\", \\\"GRVMoAQGAZ7wRE0LText18\\\":\\\"{\\\\\\\"gapUniqueId\\\\\\\":\\\\\\\"bbJI5f\\\\\\\", \\\\\\\"values\\\\\\\":\\\\\\\"{}\\\\\\\", \\\\\\\"consumed\\\\\\\":\\\\\\\"{}\\\\\\\", \\\\\\\"disabled\\\\\\\":\\\\\\\"[]\\\\\\\", \\\\\\\"isVisible\\\\\\\":\\\\\\\"true\\\\\\\", \\\\\\\"droppedElements\\\\\\\":\\\\\\\"{}\\\\\\\", \\\\\\\"hasBeenAccessed\\\\\\\":\\\\\\\"{}\\\\\\\"}\\\", \\\"GRVMoAQGAZ7wRE0LLine1\\\":\\\"{\\\\\\\"isVisible\\\\\\\":true}\\\", \\\"GRVMoAQGAZ7wRE0Lmultiplegap1\\\":\\\"{\\\\\\\"placeholders\\\\\\\":[{\\\\\\\"item\\\\\\\":\\\\\\\"Source_list1-1\\\\\\\",\\\\\\\"value\\\\\\\":\\\\\\\"Descubrimiento de la metalurgia.\\\\\\\",\\\\\\\"type\\\\\\\":\\\\\\\"string\\\\\\\"},{\\\\\\\"item\\\\\\\":\\\\\\\"Source_list1-5\\\\\\\",\\\\\\\"value\\\\\\\":\\\\\\\"Surgió la orfebrería.\\\\\\\",\\\\\\\"type\\\\\\\":\\\\\\\"string\\\\\\\"},{\\\\\\\"item\\\\\\\":\\\\\\\"Source_list1-3\\\\\\\",\\\\\\\"value\\\\\\\":\\\\\\\"El cobre se convirtió en el metal más importante.\\\\\\\",\\\\\\\"type\\\\\\\":\\\\\\\"string\\\\\\\"}],\\\\\\\"isVisible\\\\\\\":true}\\\", \\\"GRVMoAQGAZ7wRE0Lmultiplegap2\\\":\\\"{\\\\\\\"placeholders\\\\\\\":[{\\\\\\\"item\\\\\\\":\\\\\\\"Source_list1-7\\\\\\\",\\\\\\\"value\\\\\\\":\\\\\\\"Se generalizó el uso de objetos de metal.\\\\\\\",\\\\\\\"type\\\\\\\":\\\\\\\"string\\\\\\\"},{\\\\\\\"item\\\\\\\":\\\\\\\"Source_list1-9\\\\\\\",\\\\\\\"value\\\\\\\":\\\\\\\"Uso del arado tirado por animales.\\\\\\\",\\\\\\\"type\\\\\\\":\\\\\\\"string\\\\\\\"},{\\\\\\\"item\\\\\\\":\\\\\\\"Source_list1-4\\\\\\\",\\\\\\\"value\\\\\\\":\\\\\\\"Gran impulso de la minería.\\\\\\\",\\\\\\\"type\\\\\\\":\\\\\\\"string\\\\\\\"}],\\\\\\\"isVisible\\\\\\\":true}\\\", \\\"GRVMoAQGAZ7wRE0LShape33\\\":\\\"{\\\\\\\"isVisible\\\\\\\":\\\\\\\"true\\\\\\\"}\\\", \\\"GRVMoAQGAZ7wRE0LText4\\\":\\\"{\\\\\\\"gapUniqueId\\\\\\\":\\\\\\\"ZLws7K\\\\\\\", \\\\\\\"values\\\\\\\":\\\\\\\"{}\\\\\\\", \\\\\\\"consumed\\\\\\\":\\\\\\\"{}\\\\\\\", \\\\\\\"disabled\\\\\\\":\\\\\\\"[]\\\\\\\", \\\\\\\"isVisible\\\\\\\":\\\\\\\"true\\\\\\\", \\\\\\\"droppedElements\\\\\\\":\\\\\\\"{}\\\\\\\", \\\\\\\"hasBeenAccessed\\\\\\\":\\\\\\\"{}\\\\\\\"}\\\", \\\"GRVMoAQGAZ7wRE0LImage1\\\":\\\"true\\\", \\\"GRVMoAQGAZ7wRE0Lmultiplegap3\\\":\\\"{\\\\\\\"placeholders\\\\\\\":[{\\\\\\\"item\\\\\\\":\\\\\\\"Source_list1-6\\\\\\\",\\\\\\\"value\\\\\\\":\\\\\\\"Se formaron los primeros reinos.\\\\\\\",\\\\\\\"type\\\\\\\":\\\\\\\"string\\\\\\\"},{\\\\\\\"item\\\\\\\":\\\\\\\"Source_list1-8\\\\\\\",\\\\\\\"value\\\\\\\":\\\\\\\"Se construyeron diques y canales de regadío.\\\\\\\",\\\\\\\"type\\\\\\\":\\\\\\\"string\\\\\\\"},{\\\\\\\"item\\\\\\\":\\\\\\\"Source_list1-2\\\\\\\",\\\\\\\"value\\\\\\\":\\\\\\\"Período Calcolítico.\\\\\\\",\\\\\\\"type\\\\\\\":\\\\\\\"string\\\\\\\"}],\\\\\\\"isVisible\\\\\\\":true}\\\", \\\"GRVMoAQGAZ7wRE0LLine2\\\":\\\"{\\\\\\\"isVisible\\\\\\\":true}\\\", \\\"GRVMoAQGAZ7wRE0LText5\\\":\\\"{\\\\\\\"gapUniqueId\\\\\\\":\\\\\\\"SO9ACM\\\\\\\", \\\\\\\"values\\\\\\\":\\\\\\\"{}\\\\\\\", \\\\\\\"consumed\\\\\\\":\\\\\\\"{}\\\\\\\", \\\\\\\"disabled\\\\\\\":\\\\\\\"[]\\\\\\\", \\\\\\\"isVisible\\\\\\\":\\\\\\\"true\\\\\\\", \\\\\\\"droppedElements\\\\\\\":\\\\\\\"{}\\\\\\\", \\\\\\\"hasBeenAccessed\\\\\\\":\\\\\\\"{}\\\\\\\"}\\\", \\\"GRVMoAQGAZ7wRE0LImage2\\\":\\\"true\\\", \\\"GRVMoAQGAZ7wRE0LParagraph1\\\":\\\"{\\\\\\\"tinymceState\\\\\\\":\\\\\\\"<p style=\\\\\\\\\\\\\\\"font-size: 20px;\\\\\\\\\\\\\\\">Primera respuesta abierta</p>\\\\\\\",\\\\\\\"isVisible\\\\\\\":true,\\\\\\\"isLocked\\\\\\\":false}\\\", \\\"GRVMoAQGAZ7wRE0LParagraph2\\\":\\\"{\\\\\\\"tinymceState\\\\\\\":\\\\\\\"<p style=\\\\\\\\\\\\\\\"font-size: 20px;\\\\\\\\\\\\\\\">Segunda respuesta abierta</p>\\\\\\\",\\\\\\\"isVisible\\\\\\\":true,\\\\\\\"isLocked\\\\\\\":false}\\\", \\\"GRVMoAQGAZ7wRE0LText7\\\":\\\"{\\\\\\\"gapUniqueId\\\\\\\":\\\\\\\"Kgw0qw\\\\\\\", \\\\\\\"values\\\\\\\":\\\\\\\"{}\\\\\\\", \\\\\\\"consumed\\\\\\\":\\\\\\\"{}\\\\\\\", \\\\\\\"disabled\\\\\\\":\\\\\\\"[]\\\\\\\", \\\\\\\"isVisible\\\\\\\":\\\\\\\"true\\\\\\\", \\\\\\\"droppedElements\\\\\\\":\\\\\\\"{}\\\\\\\", \\\\\\\"hasBeenAccessed\\\\\\\":\\\\\\\"{}\\\\\\\"}\\\", \\\"GRVMoAQGAZ7wRE0LText10\\\":\\\"{\\\\\\\"gapUniqueId\\\\\\\":\\\\\\\"VKhg0x\\\\\\\", \\\\\\\"values\\\\\\\":\\\\\\\"{}\\\\\\\", \\\\\\\"consumed\\\\\\\":\\\\\\\"{}\\\\\\\", \\\\\\\"disabled\\\\\\\":\\\\\\\"[]\\\\\\\", \\\\\\\"isVisible\\\\\\\":\\\\\\\"true\\\\\\\", \\\\\\\"droppedElements\\\\\\\":\\\\\\\"{}\\\\\\\", \\\\\\\"hasBeenAccessed\\\\\\\":\\\\\\\"{}\\\\\\\"}\\\", \\\"GRVMoAQGAZ7wRE0LParagraph3\\\":\\\"{\\\\\\\"tinymceState\\\\\\\":\\\\\\\"<p style=\\\\\\\\\\\\\\\"font-size: 20px;\\\\\\\\\\\\\\\">Tercera respuesta abierta</p>\\\\\\\",\\\\\\\"isVisible\\\\\\\":true,\\\\\\\"isLocked\\\\\\\":false}\\\", \\\"GRVMoAQGAZ7wRE0LParagraph4\\\":\\\"{\\\\\\\"tinymceState\\\\\\\":\\\\\\\"<p style=\\\\\\\\\\\\\\\"font-size: 20px;\\\\\\\\\\\\\\\">Cuarta respuesta abierta</p>\\\\\\\",\\\\\\\"isVisible\\\\\\\":true,\\\\\\\"isLocked\\\\\\\":false}\\\", \\\"GRVMoAQGAZ7wRE0LShape1\\\":\\\"{\\\\\\\"isVisible\\\\\\\":\\\\\\\"true\\\\\\\"}\\\", \\\"GRVMoAQGAZ7wRE0LShape3\\\":\\\"{\\\\\\\"isVisible\\\\\\\":\\\\\\\"true\\\\\\\"}\\\", \\\"GRVMoAQGAZ7wRE0LShape4\\\":\\\"{\\\\\\\"isVisible\\\\\\\":\\\\\\\"true\\\\\\\"}\\\", \\\"GRVMoAQGAZ7wRE0LShape5\\\":\\\"{\\\\\\\"isVisible\\\\\\\":\\\\\\\"true\\\\\\\"}\\\", \\\"GRVMoAQGAZ7wRE0LShape6\\\":\\\"{\\\\\\\"isVisible\\\\\\\":\\\\\\\"true\\\\\\\"}\\\", \\\"GRVMoAQGAZ7wRE0LShape7\\\":\\\"{\\\\\\\"isVisible\\\\\\\":\\\\\\\"true\\\\\\\"}\\\", \\\"GRVMoAQGAZ7wRE0LShape9\\\":\\\"{\\\\\\\"isVisible\\\\\\\":\\\\\\\"true\\\\\\\"}\\\", \\\"GRVMoAQGAZ7wRE0LShape14\\\":\\\"{\\\\\\\"isVisible\\\\\\\":\\\\\\\"true\\\\\\\"}\\\", \\\"GRVMoAQGAZ7wRE0LSource_list1\\\":\\\"{\\\\\\\"stateVersion\\\\\\\":\\\\\\\"1\\\\\\\", \\\\\\\"isVisible\\\\\\\":\\\\\\\"true\\\\\\\", \\\\\\\"items\\\\\\\":\\\\\\\"[]\\\\\\\"}\\\", \\\"GRVMoAQGAZ7wRE0LGroup8\\\":\\\"true\\\", \\\"GRVMoAQGAZ7wRE0LGroup9\\\":\\\"true\\\", \\\"GRVMoAQGAZ7wRE0LGroup10\\\":\\\"true\\\", \\\"GRVMoAQGAZ7wRE0LGroup1\\\":\\\"true\\\", \\\"GRVMoAQGAZ7wRE0LGroup0\\\":\\\"true\\\", \\\"GRVMoAQGAZ7wRE0LGroup2\\\":\\\"true\\\", \\\"GRVMoAQGAZ7wRE0LICPLAYER_PAGE_HEIGHT_MODIFICATIONS\\\":\\\"[]\\\", \\\"K9YA29VowVIJxYL9Title\\\":\\\"{\\\\\\\"gapUniqueId\\\\\\\":\\\\\\\"NKrZk9\\\\\\\", \\\\\\\"values\\\\\\\":\\\\\\\"{}\\\\\\\", \\\\\\\"consumed\\\\\\\":\\\\\\\"{}\\\\\\\", \\\\\\\"disabled\\\\\\\":\\\\\\\"[]\\\\\\\", \\\\\\\"isVisible\\\\\\\":\\\\\\\"false\\\\\\\", \\\\\\\"droppedElements\\\\\\\":\\\\\\\"{}\\\\\\\", \\\\\\\"hasBeenAccessed\\\\\\\":\\\\\\\"{}\\\\\\\"}\\\", \\\"K9YA29VowVIJxYL9__navigation_bar_anchor\\\":\\\"{\\\\\\\"bookmarks\\\\\\\":[]}\\\", \\\"K9YA29VowVIJxYL9template_commons_util1\\\":\\\"\\\", \\\"K9YA29VowVIJxYL9ICPLAYER_PAGE_HEIGHT_MODIFICATIONS\\\":\\\"[]\\\", \\\"UHcCcStmZLy83spq__disable_show_answers\\\":\\\"{\\\\\\\"isVisible\\\\\\\":\\\\\\\"true\\\\\\\"}\\\", \\\"UHcCcStmZLy83spq__disable_reset\\\":\\\"{\\\\\\\"isVisible\\\\\\\":\\\\\\\"true\\\\\\\"}\\\", \\\"UHcCcStmZLy83spq__disable_save\\\":\\\"{\\\\\\\"isVisible\\\\\\\":\\\\\\\"false\\\\\\\"}\\\", \\\"UHcCcStmZLy83spq__disable_check\\\":\\\"{\\\\\\\"isVisible\\\\\\\":\\\\\\\"false\\\\\\\"}\\\", \\\"UHcCcStmZLy83spq__open_report\\\":\\\"{\\\\\\\"isVisible\\\\\\\":\\\\\\\"false\\\\\\\"}\\\", \\\"UHcCcStmZLy83spq__open_feedback\\\":\\\"{\\\\\\\"isVisible\\\\\\\":false,\\\\\\\"isSelected\\\\\\\":false,\\\\\\\"isDisabled\\\\\\\":true}\\\", \\\"UHcCcStmZLy83spq__show_answers\\\":\\\"{\\\\\\\"isVisible\\\\\\\":false}\\\", \\\"UHcCcStmZLy83spq__reset\\\":\\\"{\\\\\\\"isVisible\\\\\\\":\\\\\\\"false\\\\\\\"}\\\", \\\"UHcCcStmZLy83spq__save\\\":\\\"{\\\\\\\"isVisible\\\\\\\":true,\\\\\\\"isDisabled\\\\\\\":false}\\\", \\\"UHcCcStmZLy83spq__check\\\":\\\"{\\\\\\\"isVisible\\\\\\\":\\\\\\\"true\\\\\\\"}\\\", \\\"UHcCcStmZLy83spq__scroll_top\\\":\\\"true\\\", \\\"UHcCcStmZLy83spq__disable_area\\\":\\\"{\\\\\\\"isVisible\\\\\\\":\\\\\\\"false\\\\\\\"}\\\", \\\"UHcCcStmZLy83spqConnector_Footer\\\":\\\"\\\", \\\"UHcCcStmZLy83spqICPLAYER_PAGE_HEIGHT_MODIFICATIONS\\\":\\\"[]\\\"}\", \"score\":\"{\\\"GRVMoAQGAZ7wRE0L\\\":\\\"{\\\\\\\"score\\\\\\\":\\\\\\\"1949\\\\\\\", \\\\\\\"maxScore\\\\\\\":\\\\\\\"6008\\\\\\\", \\\\\\\"checkCount\\\\\\\":\\\\\\\"1\\\\\\\", \\\\\\\"errorCount\\\\\\\":\\\\\\\"9\\\\\\\", \\\\\\\"mistakeCount\\\\\\\":\\\\\\\"9\\\\\\\", \\\\\\\"weight\\\\\\\":\\\\\\\"1\\\\\\\"}\\\"}\", \"time\":\"{\\\"pages_times\\\":\\\"{\\\\\\\"GRVMoAQGAZ7wRE0L\\\\\\\":\\\\\\\"195751\\\\\\\"}\\\"}\", \"isReportable\":\"{}\", \"adaptiveLearning\":\"{\\\"currentPageIndex\\\":\\\"0\\\", \\\"visitiedPageIndexes\\\":\\\"[0]\\\"}\", \"visitedPages\":\"GRVMoAQGAZ7wRE0L\"}"
      },
      'articulate_vacio': {
        'cmi.suspend_data': {},
        'cmi.completion_status': "",
        'cmi.success_status': ''
      },
      'articulate_datos': {
        'cmi.suspend_data': { "estado": "incompleto", "valores": { "resp_01": "Mi reino por un caballo.", "resp_02": "Crear herramientas con la imaginación." } },
        'cmi.completion_status': "incomplete",
        'cmi.success_status': 'unknown'
      },
      'clic': { 'cmi.suspend_data': 'Datos dummy' }
    };
    // Las rutas URL relativas que cargan el mAuthor o el Articulate
    const rutas = {
      'mauthor_vacio': 'mauthor/Recurso700/index.html&tipo=mauthor',
      'mauthor_datos': 'mauthor/Recurso700/index.html&tipo=mauthor',
      'articulate_vacio': 'articulate/Recurso130/index_lms.html&tipo=articulate',
      'articulate_datos': 'articulate/Recurso130/index_lms.html&tipo=articulate',
      'clic': 'clic/story.html&tipo=clic'
    };
    const rutaWrapper = 'paquetes/wrapper/wrapper.html?ruta=../';
    // El iframe que contiene el recurso, que se crea dinámicamente y que envía el postMessage apenas se carga.
    creaIframe();
    function creaIframe() {
      const iframe = document.createElement('iframe');
      iframe.onload = cargaIframe(iframe);
      iframe.src = rutaWrapper + rutas[recurso];
      document.body.appendChild(iframe);
    }
    function cargaIframe(iframe) {
      // Se tiene que esperar a cargar el iframe, pero no se puede enviar el postMessage después de cargadas las variables iniciales.
      const interval = setInterval(() => {
        if (iframe.contentWindow) {
          clearInterval(interval);
          // Como parte de la prueba, se aplaza el envío de los datos por 5 segundos para ver si todo funciona bien.
          setTimeout(() => {
            // El objeto que se pase debe tener el cmi.suspend_data (y cualquier conjunto de atributos) en la raíz para ser reconocido
            console.log('PARENT: Envío ', obj[recurso]);
            iframe.contentWindow.postMessage(obj[recurso], '*');
          }, 500);
        }
      }, 100);
    }
    // Un listener normal que detecta el 'message' que es enviado desde el interceptor y, luego, hace algo con él.
    window.addEventListener(
      "message",
      (event) => {
        console.log('PARENT: ', event.data.action, event.data.value);
        /* Hago algo con el event.data que contiene las variables cmi que me envía el usuario */
      },
      false
    );
    function cambiaRecurso(num) {
      const iframe = document.getElementsByTagName('iframe')[0];
      document.body.removeChild(iframe);
      recurso = recursos[num];
      creaIframe();
    }
  </script>
</body>

</html>