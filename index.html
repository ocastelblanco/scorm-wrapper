<!DOCTYPE html>
<html lang="es">

<head>
  <title>Parent ejemplo</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/css/bootstrap.min.css"
        rel="stylesheet"
        integrity="sha384-4bw+/aepP/YC94hEpVNVgiZdgIC5+VKNBQNGCHeKRQN+PtmoHDEXuppvnDJzQIu9"
        crossorigin="anonymous">
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/js/bootstrap.bundle.min.js"
          integrity="sha384-HwwvtgBNo3bZJJLYd8oVXjrBZt8cqVSpeBNS5n7C8IVInixGAoxmnlMuBnhbgrkm"
          crossorigin="anonymous"></script>
  <style>
    body {
      margin: 0;
    }

    iframe {
      width: 100vw;
      height: 100vh;
      border: none;
      position: absolute;
      top: 0;
      left: 0;
      z-index: 2;
    }

    .selector {
      position: fixed;
      top: 0;
      left: 0;
      display: flex;
      justify-content: center;
      align-items: flex-start;
      z-index: 3;
    }

    .btn-group {
      background-color: white;
    }

    .spinner {
      display: flex;
      justify-content: center;
      align-items: center;
      position: fixed;
      top: 0;
      left: 0;
      width: 100vw;
      height: 100vh;
      z-index: 1;
    }

    .spinner-border {
      width: 50px;
      height: 50px;
    }
  </style>
</head>

<body>
  <div class="spinner">
    <div class="spinner-border text-primary"
         role="status">
      <span class="visually-hidden">Cargando...</span>
    </div>
  </div>
  <div class="selector container-fluid">
    <div class="btn-group"
         role="group"
         aria-label="Basic radio toggle button group">
      <input type="radio"
             class="btn-check"
             name="btnradio"
             id="btnradio1"
             autocomplete="off"
             onclick="cambiaRecurso(0)"
             checked>
      <label class="btn btn-outline-primary"
             for="btnradio1">mAuthor</label>

      <input type="radio"
             class="btn-check"
             name="btnradio"
             id="btnradio2"
             onclick="cambiaRecurso(1)"
             autocomplete="off">
      <label class="btn btn-outline-primary"
             for="btnradio2">Articulate</label>

      <input type="radio"
             class="btn-check"
             name="btnradio"
             id="btnradio3"
             onclick="cambiaRecurso(2)"
             autocomplete="off">
      <label class="btn btn-outline-primary"
             for="btnradio3">Capturador de clics</label>
    </div>
  </div>
  <script>
    // Los tipos de ejemplo
    const recursos = ['mauthor', 'articulate', 'clic'];
    // 0 = mAuthor, 1 = Articulate
    let recurso = recursos[0];
    // Un objeto de ejemplo con las tres variables básicas que está esperando el mAuthor y el Articulate. Vienen desde el Backend
    const obj = {
      /*
      'mauthor': {
        "cmi.suspend_data": "",
        "cmi.location": "",
        "cmi.completion_status": ""
      },
      //*/
      //*
      'mauthor': {
        "cmi.score.max": "100",
        "cmi.mode": "normal",
        "cmi.session_time": "PT0H0M0S",
        "cmi.suspend_data": "{\"state\":\"{\\\"GRVMoAQGAZ7wRE0Lpage_navigation_page_anchor10\\\":\\\"{\\\\\\\"isVisible\\\\\\\":true}\\\", \\\"GRVMoAQGAZ7wRE0Lpage_navigation_page_anchor9\\\":\\\"{\\\\\\\"isVisible\\\\\\\":true}\\\", \\\"GRVMoAQGAZ7wRE0Lpage_navigation_page_anchor8\\\":\\\"{\\\\\\\"isVisible\\\\\\\":true}\\\", \\\"GRVMoAQGAZ7wRE0Lpage_navigation_page_anchor7\\\":\\\"{\\\\\\\"isVisible\\\\\\\":true}\\\", \\\"GRVMoAQGAZ7wRE0Lpage_navigation_page_anchor6\\\":\\\"{\\\\\\\"isVisible\\\\\\\":true}\\\", \\\"GRVMoAQGAZ7wRE0Lpage_navigation_page_anchor5\\\":\\\"{\\\\\\\"isVisible\\\\\\\":true}\\\", \\\"GRVMoAQGAZ7wRE0Lpage_navigation_page_anchor4\\\":\\\"{\\\\\\\"isVisible\\\\\\\":true}\\\", \\\"GRVMoAQGAZ7wRE0Lpage_navigation_page_anchor3\\\":\\\"{\\\\\\\"isVisible\\\\\\\":true}\\\", \\\"GRVMoAQGAZ7wRE0Lpage_navigation_page_anchor2\\\":\\\"{\\\\\\\"isVisible\\\\\\\":true}\\\", \\\"GRVMoAQGAZ7wRE0Lpage_navigation_page_anchor1\\\":\\\"{\\\\\\\"isVisible\\\\\\\":true}\\\", \\\"GRVMoAQGAZ7wRE0LText2\\\":\\\"{\\\\\\\"gapUniqueId\\\\\\\":\\\\\\\"BNoirI\\\\\\\", \\\\\\\"values\\\\\\\":\\\\\\\"{}\\\\\\\", \\\\\\\"consumed\\\\\\\":\\\\\\\"{}\\\\\\\", \\\\\\\"disabled\\\\\\\":\\\\\\\"[]\\\\\\\", \\\\\\\"isVisible\\\\\\\":\\\\\\\"true\\\\\\\", \\\\\\\"droppedElements\\\\\\\":\\\\\\\"{}\\\\\\\", \\\\\\\"hasBeenAccessed\\\\\\\":\\\\\\\"{}\\\\\\\"}\\\", \\\"GRVMoAQGAZ7wRE0LText40\\\":\\\"{\\\\\\\"gapUniqueId\\\\\\\":\\\\\\\"HO2jta\\\\\\\", \\\\\\\"values\\\\\\\":\\\\\\\"{}\\\\\\\", \\\\\\\"consumed\\\\\\\":\\\\\\\"{}\\\\\\\", \\\\\\\"disabled\\\\\\\":\\\\\\\"[]\\\\\\\", \\\\\\\"isVisible\\\\\\\":\\\\\\\"true\\\\\\\", \\\\\\\"droppedElements\\\\\\\":\\\\\\\"{}\\\\\\\", \\\\\\\"hasBeenAccessed\\\\\\\":\\\\\\\"{}\\\\\\\"}\\\", \\\"GRVMoAQGAZ7wRE0LText3\\\":\\\"{\\\\\\\"gapUniqueId\\\\\\\":\\\\\\\"q7MjhK\\\\\\\", \\\\\\\"values\\\\\\\":\\\\\\\"{}\\\\\\\", \\\\\\\"consumed\\\\\\\":\\\\\\\"{}\\\\\\\", \\\\\\\"disabled\\\\\\\":\\\\\\\"[]\\\\\\\", \\\\\\\"isVisible\\\\\\\":\\\\\\\"true\\\\\\\", \\\\\\\"droppedElements\\\\\\\":\\\\\\\"{}\\\\\\\", \\\\\\\"hasBeenAccessed\\\\\\\":\\\\\\\"{}\\\\\\\"}\\\", \\\"GRVMoAQGAZ7wRE0LText36\\\":\\\"{\\\\\\\"gapUniqueId\\\\\\\":\\\\\\\"oRqjV8\\\\\\\", \\\\\\\"values\\\\\\\":\\\\\\\"{}\\\\\\\", \\\\\\\"consumed\\\\\\\":\\\\\\\"{}\\\\\\\", \\\\\\\"disabled\\\\\\\":\\\\\\\"[]\\\\\\\", \\\\\\\"isVisible\\\\\\\":\\\\\\\"true\\\\\\\", \\\\\\\"droppedElements\\\\\\\":\\\\\\\"{}\\\\\\\", \\\\\\\"hasBeenAccessed\\\\\\\":\\\\\\\"{}\\\\\\\"}\\\", \\\"GRVMoAQGAZ7wRE0LShape12\\\":\\\"{\\\\\\\"isVisible\\\\\\\":\\\\\\\"true\\\\\\\"}\\\", \\\"GRVMoAQGAZ7wRE0LText8\\\":\\\"{\\\\\\\"gapUniqueId\\\\\\\":\\\\\\\"iq379d\\\\\\\", \\\\\\\"values\\\\\\\":\\\\\\\"{}\\\\\\\", \\\\\\\"consumed\\\\\\\":\\\\\\\"{}\\\\\\\", \\\\\\\"disabled\\\\\\\":\\\\\\\"[]\\\\\\\", \\\\\\\"isVisible\\\\\\\":\\\\\\\"true\\\\\\\", \\\\\\\"droppedElements\\\\\\\":\\\\\\\"{}\\\\\\\", \\\\\\\"hasBeenAccessed\\\\\\\":\\\\\\\"{}\\\\\\\"}\\\", \\\"GRVMoAQGAZ7wRE0LAdvanced_Connector2\\\":\\\"\\\", \\\"GRVMoAQGAZ7wRE0LShape2\\\":\\\"{\\\\\\\"isVisible\\\\\\\":\\\\\\\"true\\\\\\\"}\\\", \\\"GRVMoAQGAZ7wRE0LShape8\\\":\\\"{\\\\\\\"isVisible\\\\\\\":\\\\\\\"true\\\\\\\"}\\\", \\\"GRVMoAQGAZ7wRE0LConnection1\\\":\\\"{\\\\\\\"id\\\\\\\":[\\\\\\\"4:d\\\\\\\",\\\\\\\"1:e\\\\\\\",\\\\\\\"3:a\\\\\\\",\\\\\\\"2:b\\\\\\\",\\\\\\\"6:f\\\\\\\",\\\\\\\"5:c\\\\\\\"],\\\\\\\"isVisible\\\\\\\":true}\\\", \\\"GRVMoAQGAZ7wRE0LText9\\\":\\\"{\\\\\\\"gapUniqueId\\\\\\\":\\\\\\\"Z2m6xg\\\\\\\", \\\\\\\"values\\\\\\\":\\\\\\\"{}\\\\\\\", \\\\\\\"consumed\\\\\\\":\\\\\\\"{}\\\\\\\", \\\\\\\"disabled\\\\\\\":\\\\\\\"[]\\\\\\\", \\\\\\\"isVisible\\\\\\\":\\\\\\\"true\\\\\\\", \\\\\\\"droppedElements\\\\\\\":\\\\\\\"{}\\\\\\\", \\\\\\\"hasBeenAccessed\\\\\\\":\\\\\\\"{}\\\\\\\"}\\\", \\\"GRVMoAQGAZ7wRE0LChoice2\\\":\\\"{\\\\\\\"options\\\\\\\":\\\\\\\"10001\\\\\\\", \\\\\\\"isDisabled\\\\\\\":\\\\\\\"false\\\\\\\", \\\\\\\"isVisible\\\\\\\":\\\\\\\"true\\\\\\\"}\\\", \\\"GRVMoAQGAZ7wRE0LokA\\\":\\\"{\\\\\\\"isSelected\\\\\\\":false,\\\\\\\"isVisible\\\\\\\":false,\\\\\\\"isDisabled\\\\\\\":false}\\\", \\\"GRVMoAQGAZ7wRE0LText12\\\":\\\"{\\\\\\\"gapUniqueId\\\\\\\":\\\\\\\"7thxRN\\\\\\\", \\\\\\\"values\\\\\\\":\\\\\\\"{}\\\\\\\", \\\\\\\"consumed\\\\\\\":\\\\\\\"{}\\\\\\\", \\\\\\\"disabled\\\\\\\":\\\\\\\"[]\\\\\\\", \\\\\\\"isVisible\\\\\\\":\\\\\\\"true\\\\\\\", \\\\\\\"droppedElements\\\\\\\":\\\\\\\"{}\\\\\\\", \\\\\\\"hasBeenAccessed\\\\\\\":\\\\\\\"{}\\\\\\\"}\\\", \\\"GRVMoAQGAZ7wRE0LChoice3\\\":\\\"{\\\\\\\"options\\\\\\\":\\\\\\\"010100\\\\\\\", \\\\\\\"isDisabled\\\\\\\":\\\\\\\"false\\\\\\\", \\\\\\\"isVisible\\\\\\\":\\\\\\\"true\\\\\\\"}\\\", \\\"GRVMoAQGAZ7wRE0LokB\\\":\\\"{\\\\\\\"isSelected\\\\\\\":false,\\\\\\\"isVisible\\\\\\\":false,\\\\\\\"isDisabled\\\\\\\":false}\\\", \\\"GRVMoAQGAZ7wRE0LAdvanced_Connector3\\\":\\\"\\\", \\\"GRVMoAQGAZ7wRE0LText6\\\":\\\"{\\\\\\\"gapUniqueId\\\\\\\":\\\\\\\"UsXq89\\\\\\\", \\\\\\\"values\\\\\\\":\\\\\\\"{}\\\\\\\", \\\\\\\"consumed\\\\\\\":\\\\\\\"{}\\\\\\\", \\\\\\\"disabled\\\\\\\":\\\\\\\"[]\\\\\\\", \\\\\\\"isVisible\\\\\\\":\\\\\\\"true\\\\\\\", \\\\\\\"droppedElements\\\\\\\":\\\\\\\"{}\\\\\\\", \\\\\\\"hasBeenAccessed\\\\\\\":\\\\\\\"{}\\\\\\\"}\\\", \\\"GRVMoAQGAZ7wRE0LText1\\\":\\\"{\\\\\\\"gapUniqueId\\\\\\\":\\\\\\\"0rGRQO\\\\\\\", \\\\\\\"values\\\\\\\":\\\\\\\"{}\\\\\\\", \\\\\\\"consumed\\\\\\\":\\\\\\\"{}\\\\\\\", \\\\\\\"disabled\\\\\\\":\\\\\\\"[]\\\\\\\", \\\\\\\"isVisible\\\\\\\":\\\\\\\"true\\\\\\\", \\\\\\\"droppedElements\\\\\\\":\\\\\\\"{}\\\\\\\", \\\\\\\"hasBeenAccessed\\\\\\\":\\\\\\\"{}\\\\\\\"}\\\", \\\"GRVMoAQGAZ7wRE0LChoice4\\\":\\\"{\\\\\\\"options\\\\\\\":\\\\\\\"0101\\\\\\\", \\\\\\\"isDisabled\\\\\\\":\\\\\\\"false\\\\\\\", \\\\\\\"isVisible\\\\\\\":\\\\\\\"true\\\\\\\"}\\\", \\\"GRVMoAQGAZ7wRE0LAdvanced_Connector4\\\":\\\"\\\", \\\"GRVMoAQGAZ7wRE0LokD\\\":\\\"{\\\\\\\"isSelected\\\\\\\":false,\\\\\\\"isVisible\\\\\\\":false,\\\\\\\"isDisabled\\\\\\\":false}\\\", \\\"GRVMoAQGAZ7wRE0LShape18\\\":\\\"{\\\\\\\"isVisible\\\\\\\":\\\\\\\"true\\\\\\\"}\\\", \\\"GRVMoAQGAZ7wRE0LShape10\\\":\\\"{\\\\\\\"isVisible\\\\\\\":\\\\\\\"true\\\\\\\"}\\\", \\\"GRVMoAQGAZ7wRE0LShape11\\\":\\\"{\\\\\\\"isVisible\\\\\\\":\\\\\\\"true\\\\\\\"}\\\", \\\"GRVMoAQGAZ7wRE0LShape19\\\":\\\"{\\\\\\\"isVisible\\\\\\\":\\\\\\\"true\\\\\\\"}\\\", \\\"GRVMoAQGAZ7wRE0LShape20\\\":\\\"{\\\\\\\"isVisible\\\\\\\":\\\\\\\"true\\\\\\\"}\\\", \\\"GRVMoAQGAZ7wRE0LShape22\\\":\\\"{\\\\\\\"isVisible\\\\\\\":\\\\\\\"true\\\\\\\"}\\\", \\\"GRVMoAQGAZ7wRE0LShape23\\\":\\\"{\\\\\\\"isVisible\\\\\\\":\\\\\\\"true\\\\\\\"}\\\", \\\"GRVMoAQGAZ7wRE0LShape24\\\":\\\"{\\\\\\\"isVisible\\\\\\\":\\\\\\\"true\\\\\\\"}\\\", \\\"GRVMoAQGAZ7wRE0LText11\\\":\\\"{\\\\\\\"gapUniqueId\\\\\\\":\\\\\\\"CaaPP6\\\\\\\", \\\\\\\"values\\\\\\\":\\\\\\\"{\\\\\\\\\\\\\\\"CaaPP6-1\\\\\\\\\\\\\\\":\\\\\\\\\\\\\\\"revolución\\\\\\\\\\\\\\\", \\\\\\\\\\\\\\\"CaaPP6-2\\\\\\\\\\\\\\\":\\\\\\\\\\\\\\\"5000\\\\\\\\\\\\\\\", \\\\\\\\\\\\\\\"CaaPP6-3\\\\\\\\\\\\\\\":\\\\\\\\\\\\\\\"agricultura\\\\\\\\\\\\\\\", \\\\\\\\\\\\\\\"CaaPP6-4\\\\\\\\\\\\\\\":\\\\\\\\\\\\\\\"nómadas\\\\\\\\\\\\\\\", \\\\\\\\\\\\\\\"CaaPP6-5\\\\\\\\\\\\\\\":\\\\\\\\\\\\\\\"alimentos\\\\\\\\\\\\\\\", \\\\\\\\\\\\\\\"CaaPP6-6\\\\\\\\\\\\\\\":\\\\\\\\\\\\\\\"poblados\\\\\\\\\\\\\\\", \\\\\\\\\\\\\\\"CaaPP6-7\\\\\\\\\\\\\\\":\\\\\\\\\\\\\\\"seguridad\\\\\\\\\\\\\\\", \\\\\\\\\\\\\\\"CaaPP6-8\\\\\\\\\\\\\\\":\\\\\\\\\\\\\\\"número\\\\\\\\\\\\\\\"}\\\\\\\", \\\\\\\"consumed\\\\\\\":\\\\\\\"{\\\\\\\\\\\\\\\"CaaPP6-1\\\\\\\\\\\\\\\":\\\\\\\\\\\\\\\"Source_list5-1@Arevolución\\\\\\\\\\\\\\\", \\\\\\\\\\\\\\\"CaaPP6-2\\\\\\\\\\\\\\\":\\\\\\\\\\\\\\\"Source_list5-2@A5000\\\\\\\\\\\\\\\", \\\\\\\\\\\\\\\"CaaPP6-3\\\\\\\\\\\\\\\":\\\\\\\\\\\\\\\"Source_list5-3@Aagricultura\\\\\\\\\\\\\\\", \\\\\\\\\\\\\\\"CaaPP6-4\\\\\\\\\\\\\\\":\\\\\\\\\\\\\\\"Source_list5-4@Anómadas\\\\\\\\\\\\\\\", \\\\\\\\\\\\\\\"CaaPP6-5\\\\\\\\\\\\\\\":\\\\\\\\\\\\\\\"Source_list5-5@Aalimentos\\\\\\\\\\\\\\\", \\\\\\\\\\\\\\\"CaaPP6-6\\\\\\\\\\\\\\\":\\\\\\\\\\\\\\\"Source_list5-8@Apoblados\\\\\\\\\\\\\\\", \\\\\\\\\\\\\\\"CaaPP6-7\\\\\\\\\\\\\\\":\\\\\\\\\\\\\\\"Source_list5-7@Aseguridad\\\\\\\\\\\\\\\", \\\\\\\\\\\\\\\"CaaPP6-8\\\\\\\\\\\\\\\":\\\\\\\\\\\\\\\"Source_list5-6@Anúmero\\\\\\\\\\\\\\\"}\\\\\\\", \\\\\\\"disabled\\\\\\\":\\\\\\\"[false,false,false,false,false,false,false,false]\\\\\\\", \\\\\\\"isVisible\\\\\\\":\\\\\\\"true\\\\\\\", \\\\\\\"droppedElements\\\\\\\":\\\\\\\"{\\\\\\\\\\\\\\\"CaaPP6-1\\\\\\\\\\\\\\\":\\\\\\\\\\\\\\\"&lt;div class=&quot;ic_sourceListItem ui-draggable ic_sourceListItem-selected ui-draggable-dragging&quot; style=&quot;display: inline-block; white-space: nowrap; position: absolute; z-index: 100; width: 195px; height: 25px; left: -380px; top: 254px;&quot;&gt;revolución&lt;/div&gt;\\\\\\\\\\\\\\\", \\\\\\\\\\\\\\\"CaaPP6-2\\\\\\\\\\\\\\\":\\\\\\\\\\\\\\\"&lt;div class=&quot;ic_sourceListItem ui-draggable ic_sourceListItem-selected ui-draggable-dragging&quot; style=&quot;display: inline-block; white-space: nowrap; position: absolute; z-index: 100; width: 195px; height: 25px; left: 27px; top: 263px;&quot;&gt;5000&lt;/div&gt;\\\\\\\\\\\\\\\", \\\\\\\\\\\\\\\"CaaPP6-3\\\\\\\\\\\\\\\":\\\\\\\\\\\\\\\"&lt;div class=&quot;ic_sourceListItem ui-draggable ic_sourceListItem-selected ui-draggable-dragging&quot; style=&quot;display: inline-block; white-space: nowrap; position: absolute; z-index: 100; width: 195px; height: 25px; left: -88px; top: 305px;&quot;&gt;agricultura&lt;/div&gt;\\\\\\\\\\\\\\\", \\\\\\\\\\\\\\\"CaaPP6-4\\\\\\\\\\\\\\\":\\\\\\\\\\\\\\\"&lt;div class=&quot;ic_sourceListItem ui-draggable ic_sourceListItem-selected ui-draggable-dragging&quot; style=&quot;display: inline-block; white-space: nowrap; position: absolute; z-index: 100; width: 195px; height: 25px; left: -448px; top: 352px;&quot;&gt;nómadas&lt;/div&gt;\\\\\\\\\\\\\\\", \\\\\\\\\\\\\\\"CaaPP6-5\\\\\\\\\\\\\\\":\\\\\\\\\\\\\\\"&lt;div class=&quot;ic_sourceListItem ui-draggable ic_sourceListItem-selected ui-draggable-dragging&quot; style=&quot;display: inline-block; white-space: nowrap; position: absolute; z-index: 100; width: 195px; height: 25px; left: 37px; top: 357px;&quot;&gt;alimentos&lt;/div&gt;\\\\\\\\\\\\\\\", \\\\\\\\\\\\\\\"CaaPP6-6\\\\\\\\\\\\\\\":\\\\\\\\\\\\\\\"&lt;div class=&quot;ic_sourceListItem ui-draggable ic_sourceListItem-selected ui-draggable-dragging&quot; style=&quot;display: inline-block; white-space: nowrap; position: absolute; z-index: 100; width: 195px; height: 25px; left: -465px; top: 394px;&quot;&gt;poblados&lt;/div&gt;\\\\\\\\\\\\\\\", \\\\\\\\\\\\\\\"CaaPP6-7\\\\\\\\\\\\\\\":\\\\\\\\\\\\\\\"&lt;div class=&quot;ic_sourceListItem ui-draggable ic_sourceListItem-selected ui-draggable-dragging&quot; style=&quot;display: inline-block; white-space: nowrap; position: absolute; z-index: 100; width: 195px; height: 25px; left: 83px; top: 390px;&quot;&gt;seguridad&lt;/div&gt;\\\\\\\\\\\\\\\", \\\\\\\\\\\\\\\"CaaPP6-8\\\\\\\\\\\\\\\":\\\\\\\\\\\\\\\"&lt;div class=&quot;ic_sourceListItem ui-draggable ic_sourceListItem-selected ui-draggable-dragging&quot; style=&quot;display: inline-block; white-space: nowrap; position: absolute; z-index: 100; width: 195px; height: 25px; left: -472px; top: 481px;&quot;&gt;número&lt;/div&gt;\\\\\\\\\\\\\\\"}\\\\\\\", \\\\\\\"hasBeenAccessed\\\\\\\":\\\\\\\"{}\\\\\\\"}\\\", \\\"GRVMoAQGAZ7wRE0LSource_list5\\\":\\\"{\\\\\\\"stateVersion\\\\\\\":\\\\\\\"1\\\\\\\", \\\\\\\"isVisible\\\\\\\":\\\\\\\"true\\\\\\\", \\\\\\\"items\\\\\\\":\\\\\\\"[]\\\\\\\"}\\\", \\\"GRVMoAQGAZ7wRE0LShape32\\\":\\\"{\\\\\\\"isVisible\\\\\\\":\\\\\\\"true\\\\\\\"}\\\", \\\"GRVMoAQGAZ7wRE0LText15\\\":\\\"{\\\\\\\"gapUniqueId\\\\\\\":\\\\\\\"BD0zvZ\\\\\\\", \\\\\\\"values\\\\\\\":\\\\\\\"{}\\\\\\\", \\\\\\\"consumed\\\\\\\":\\\\\\\"{}\\\\\\\", \\\\\\\"disabled\\\\\\\":\\\\\\\"[]\\\\\\\", \\\\\\\"isVisible\\\\\\\":\\\\\\\"true\\\\\\\", \\\\\\\"droppedElements\\\\\\\":\\\\\\\"{}\\\\\\\", \\\\\\\"hasBeenAccessed\\\\\\\":\\\\\\\"{}\\\\\\\"}\\\", \\\"GRVMoAQGAZ7wRE0LText18\\\":\\\"{\\\\\\\"gapUniqueId\\\\\\\":\\\\\\\"A4lcTB\\\\\\\", \\\\\\\"values\\\\\\\":\\\\\\\"{}\\\\\\\", \\\\\\\"consumed\\\\\\\":\\\\\\\"{}\\\\\\\", \\\\\\\"disabled\\\\\\\":\\\\\\\"[]\\\\\\\", \\\\\\\"isVisible\\\\\\\":\\\\\\\"true\\\\\\\", \\\\\\\"droppedElements\\\\\\\":\\\\\\\"{}\\\\\\\", \\\\\\\"hasBeenAccessed\\\\\\\":\\\\\\\"{}\\\\\\\"}\\\", \\\"GRVMoAQGAZ7wRE0LLine1\\\":\\\"{\\\\\\\"isVisible\\\\\\\":true}\\\", \\\"GRVMoAQGAZ7wRE0Lmultiplegap1\\\":\\\"{\\\\\\\"placeholders\\\\\\\":[{\\\\\\\"item\\\\\\\":\\\\\\\"Source_list1-4\\\\\\\",\\\\\\\"value\\\\\\\":\\\\\\\"Gran impulso de la minería.\\\\\\\",\\\\\\\"type\\\\\\\":\\\\\\\"string\\\\\\\"},{\\\\\\\"item\\\\\\\":\\\\\\\"Source_list1-7\\\\\\\",\\\\\\\"value\\\\\\\":\\\\\\\"Se generalizó el uso de objetos de metal.\\\\\\\",\\\\\\\"type\\\\\\\":\\\\\\\"string\\\\\\\"},{\\\\\\\"item\\\\\\\":\\\\\\\"Source_list1-3\\\\\\\",\\\\\\\"value\\\\\\\":\\\\\\\"El cobre se convirtió en el metal más importante.\\\\\\\",\\\\\\\"type\\\\\\\":\\\\\\\"string\\\\\\\"}],\\\\\\\"isVisible\\\\\\\":true}\\\", \\\"GRVMoAQGAZ7wRE0Lmultiplegap2\\\":\\\"{\\\\\\\"placeholders\\\\\\\":[{\\\\\\\"item\\\\\\\":\\\\\\\"Source_list1-6\\\\\\\",\\\\\\\"value\\\\\\\":\\\\\\\"Se formaron los primeros reinos.\\\\\\\",\\\\\\\"type\\\\\\\":\\\\\\\"string\\\\\\\"},{\\\\\\\"item\\\\\\\":\\\\\\\"Source_list1-5\\\\\\\",\\\\\\\"value\\\\\\\":\\\\\\\"Surgió la orfebrería.\\\\\\\",\\\\\\\"type\\\\\\\":\\\\\\\"string\\\\\\\"},{\\\\\\\"item\\\\\\\":\\\\\\\"Source_list1-8\\\\\\\",\\\\\\\"value\\\\\\\":\\\\\\\"Se construyeron diques y canales de regadío.\\\\\\\",\\\\\\\"type\\\\\\\":\\\\\\\"string\\\\\\\"}],\\\\\\\"isVisible\\\\\\\":true}\\\", \\\"GRVMoAQGAZ7wRE0LShape33\\\":\\\"{\\\\\\\"isVisible\\\\\\\":\\\\\\\"true\\\\\\\"}\\\", \\\"GRVMoAQGAZ7wRE0LText4\\\":\\\"{\\\\\\\"gapUniqueId\\\\\\\":\\\\\\\"WygsoE\\\\\\\", \\\\\\\"values\\\\\\\":\\\\\\\"{}\\\\\\\", \\\\\\\"consumed\\\\\\\":\\\\\\\"{}\\\\\\\", \\\\\\\"disabled\\\\\\\":\\\\\\\"[]\\\\\\\", \\\\\\\"isVisible\\\\\\\":\\\\\\\"true\\\\\\\", \\\\\\\"droppedElements\\\\\\\":\\\\\\\"{}\\\\\\\", \\\\\\\"hasBeenAccessed\\\\\\\":\\\\\\\"{}\\\\\\\"}\\\", \\\"GRVMoAQGAZ7wRE0LImage1\\\":\\\"true\\\", \\\"GRVMoAQGAZ7wRE0Lmultiplegap3\\\":\\\"{\\\\\\\"placeholders\\\\\\\":[{\\\\\\\"item\\\\\\\":\\\\\\\"Source_list1-2\\\\\\\",\\\\\\\"value\\\\\\\":\\\\\\\"Período Calcolítico.\\\\\\\",\\\\\\\"type\\\\\\\":\\\\\\\"string\\\\\\\"},{\\\\\\\"item\\\\\\\":\\\\\\\"Source_list1-9\\\\\\\",\\\\\\\"value\\\\\\\":\\\\\\\"Uso del arado tirado por animales.\\\\\\\",\\\\\\\"type\\\\\\\":\\\\\\\"string\\\\\\\"},{\\\\\\\"item\\\\\\\":\\\\\\\"Source_list1-1\\\\\\\",\\\\\\\"value\\\\\\\":\\\\\\\"Descubrimiento de la metalurgia.\\\\\\\",\\\\\\\"type\\\\\\\":\\\\\\\"string\\\\\\\"}],\\\\\\\"isVisible\\\\\\\":true}\\\", \\\"GRVMoAQGAZ7wRE0LLine2\\\":\\\"{\\\\\\\"isVisible\\\\\\\":true}\\\", \\\"GRVMoAQGAZ7wRE0LText5\\\":\\\"{\\\\\\\"gapUniqueId\\\\\\\":\\\\\\\"s9B4nb\\\\\\\", \\\\\\\"values\\\\\\\":\\\\\\\"{}\\\\\\\", \\\\\\\"consumed\\\\\\\":\\\\\\\"{}\\\\\\\", \\\\\\\"disabled\\\\\\\":\\\\\\\"[]\\\\\\\", \\\\\\\"isVisible\\\\\\\":\\\\\\\"true\\\\\\\", \\\\\\\"droppedElements\\\\\\\":\\\\\\\"{}\\\\\\\", \\\\\\\"hasBeenAccessed\\\\\\\":\\\\\\\"{}\\\\\\\"}\\\", \\\"GRVMoAQGAZ7wRE0LImage2\\\":\\\"true\\\", \\\"GRVMoAQGAZ7wRE0LParagraph1\\\":\\\"{\\\\\\\"tinymceState\\\\\\\":\\\\\\\"<p style=\\\\\\\\\\\\\\\"font-size: 20px;\\\\\\\\\\\\\\\">Con foto</p>\\\\\\\",\\\\\\\"isVisible\\\\\\\":true,\\\\\\\"isLocked\\\\\\\":false}\\\", \\\"GRVMoAQGAZ7wRE0LParagraph2\\\":\\\"{\\\\\\\"tinymceState\\\\\\\":\\\\\\\"<p style=\\\\\\\\\\\\\\\"font-size: 20px;\\\\\\\\\\\\\\\">Primero</p>\\\\\\\",\\\\\\\"isVisible\\\\\\\":true,\\\\\\\"isLocked\\\\\\\":false}\\\", \\\"GRVMoAQGAZ7wRE0LText7\\\":\\\"{\\\\\\\"gapUniqueId\\\\\\\":\\\\\\\"JSmNTs\\\\\\\", \\\\\\\"values\\\\\\\":\\\\\\\"{}\\\\\\\", \\\\\\\"consumed\\\\\\\":\\\\\\\"{}\\\\\\\", \\\\\\\"disabled\\\\\\\":\\\\\\\"[]\\\\\\\", \\\\\\\"isVisible\\\\\\\":\\\\\\\"true\\\\\\\", \\\\\\\"droppedElements\\\\\\\":\\\\\\\"{}\\\\\\\", \\\\\\\"hasBeenAccessed\\\\\\\":\\\\\\\"{}\\\\\\\"}\\\", \\\"GRVMoAQGAZ7wRE0LText10\\\":\\\"{\\\\\\\"gapUniqueId\\\\\\\":\\\\\\\"UkmYsu\\\\\\\", \\\\\\\"values\\\\\\\":\\\\\\\"{}\\\\\\\", \\\\\\\"consumed\\\\\\\":\\\\\\\"{}\\\\\\\", \\\\\\\"disabled\\\\\\\":\\\\\\\"[]\\\\\\\", \\\\\\\"isVisible\\\\\\\":\\\\\\\"true\\\\\\\", \\\\\\\"droppedElements\\\\\\\":\\\\\\\"{}\\\\\\\", \\\\\\\"hasBeenAccessed\\\\\\\":\\\\\\\"{}\\\\\\\"}\\\", \\\"GRVMoAQGAZ7wRE0LParagraph3\\\":\\\"{\\\\\\\"tinymceState\\\\\\\":\\\\\\\"<p style=\\\\\\\\\\\\\\\"font-size: 20px;\\\\\\\\\\\\\\\">Segundo</p>\\\\\\\",\\\\\\\"isVisible\\\\\\\":true,\\\\\\\"isLocked\\\\\\\":false}\\\", \\\"GRVMoAQGAZ7wRE0LParagraph4\\\":\\\"{\\\\\\\"tinymceState\\\\\\\":\\\\\\\"<p style=\\\\\\\\\\\\\\\"font-size: 20px;\\\\\\\\\\\\\\\">Tercero</p>\\\\\\\",\\\\\\\"isVisible\\\\\\\":true,\\\\\\\"isLocked\\\\\\\":false}\\\", \\\"GRVMoAQGAZ7wRE0LShape1\\\":\\\"{\\\\\\\"isVisible\\\\\\\":\\\\\\\"true\\\\\\\"}\\\", \\\"GRVMoAQGAZ7wRE0LShape3\\\":\\\"{\\\\\\\"isVisible\\\\\\\":\\\\\\\"true\\\\\\\"}\\\", \\\"GRVMoAQGAZ7wRE0LShape4\\\":\\\"{\\\\\\\"isVisible\\\\\\\":\\\\\\\"true\\\\\\\"}\\\", \\\"GRVMoAQGAZ7wRE0LShape5\\\":\\\"{\\\\\\\"isVisible\\\\\\\":\\\\\\\"true\\\\\\\"}\\\", \\\"GRVMoAQGAZ7wRE0LShape6\\\":\\\"{\\\\\\\"isVisible\\\\\\\":\\\\\\\"true\\\\\\\"}\\\", \\\"GRVMoAQGAZ7wRE0LShape7\\\":\\\"{\\\\\\\"isVisible\\\\\\\":\\\\\\\"true\\\\\\\"}\\\", \\\"GRVMoAQGAZ7wRE0LShape9\\\":\\\"{\\\\\\\"isVisible\\\\\\\":\\\\\\\"true\\\\\\\"}\\\", \\\"GRVMoAQGAZ7wRE0LShape14\\\":\\\"{\\\\\\\"isVisible\\\\\\\":\\\\\\\"true\\\\\\\"}\\\", \\\"GRVMoAQGAZ7wRE0LSource_list1\\\":\\\"{\\\\\\\"stateVersion\\\\\\\":\\\\\\\"1\\\\\\\", \\\\\\\"isVisible\\\\\\\":\\\\\\\"true\\\\\\\", \\\\\\\"items\\\\\\\":\\\\\\\"[]\\\\\\\"}\\\", \\\"GRVMoAQGAZ7wRE0LGroup8\\\":\\\"true\\\", \\\"GRVMoAQGAZ7wRE0LGroup9\\\":\\\"true\\\", \\\"GRVMoAQGAZ7wRE0LGroup10\\\":\\\"true\\\", \\\"GRVMoAQGAZ7wRE0LGroup1\\\":\\\"true\\\", \\\"GRVMoAQGAZ7wRE0LGroup0\\\":\\\"true\\\", \\\"GRVMoAQGAZ7wRE0LGroup2\\\":\\\"true\\\", \\\"GRVMoAQGAZ7wRE0LICPLAYER_PAGE_HEIGHT_MODIFICATIONS\\\":\\\"[]\\\", \\\"K9YA29VowVIJxYL9Title\\\":\\\"{\\\\\\\"gapUniqueId\\\\\\\":\\\\\\\"GbMpe9\\\\\\\", \\\\\\\"values\\\\\\\":\\\\\\\"{}\\\\\\\", \\\\\\\"consumed\\\\\\\":\\\\\\\"{}\\\\\\\", \\\\\\\"disabled\\\\\\\":\\\\\\\"[]\\\\\\\", \\\\\\\"isVisible\\\\\\\":\\\\\\\"false\\\\\\\", \\\\\\\"droppedElements\\\\\\\":\\\\\\\"{}\\\\\\\", \\\\\\\"hasBeenAccessed\\\\\\\":\\\\\\\"{}\\\\\\\"}\\\", \\\"K9YA29VowVIJxYL9__navigation_bar_anchor\\\":\\\"{\\\\\\\"bookmarks\\\\\\\":[]}\\\", \\\"K9YA29VowVIJxYL9template_commons_util1\\\":\\\"\\\", \\\"K9YA29VowVIJxYL9ICPLAYER_PAGE_HEIGHT_MODIFICATIONS\\\":\\\"[]\\\", \\\"UHcCcStmZLy83spq__disable_show_answers\\\":\\\"{\\\\\\\"isVisible\\\\\\\":\\\\\\\"true\\\\\\\"}\\\", \\\"UHcCcStmZLy83spq__disable_reset\\\":\\\"{\\\\\\\"isVisible\\\\\\\":\\\\\\\"true\\\\\\\"}\\\", \\\"UHcCcStmZLy83spq__disable_save\\\":\\\"{\\\\\\\"isVisible\\\\\\\":\\\\\\\"false\\\\\\\"}\\\", \\\"UHcCcStmZLy83spq__disable_check\\\":\\\"{\\\\\\\"isVisible\\\\\\\":\\\\\\\"false\\\\\\\"}\\\", \\\"UHcCcStmZLy83spq__open_report\\\":\\\"{\\\\\\\"isVisible\\\\\\\":\\\\\\\"false\\\\\\\"}\\\", \\\"UHcCcStmZLy83spq__open_feedback\\\":\\\"{\\\\\\\"isVisible\\\\\\\":false,\\\\\\\"isSelected\\\\\\\":false,\\\\\\\"isDisabled\\\\\\\":true}\\\", \\\"UHcCcStmZLy83spq__show_answers\\\":\\\"{\\\\\\\"isVisible\\\\\\\":false}\\\", \\\"UHcCcStmZLy83spq__reset\\\":\\\"{\\\\\\\"isVisible\\\\\\\":\\\\\\\"false\\\\\\\"}\\\", \\\"UHcCcStmZLy83spq__save\\\":\\\"{\\\\\\\"isVisible\\\\\\\":true,\\\\\\\"isDisabled\\\\\\\":false}\\\", \\\"UHcCcStmZLy83spq__check\\\":\\\"{\\\\\\\"isVisible\\\\\\\":\\\\\\\"true\\\\\\\"}\\\", \\\"UHcCcStmZLy83spq__scroll_top\\\":\\\"true\\\", \\\"UHcCcStmZLy83spq__disable_area\\\":\\\"{\\\\\\\"isVisible\\\\\\\":\\\\\\\"false\\\\\\\"}\\\", \\\"UHcCcStmZLy83spqConnector_Footer\\\":\\\"\\\", \\\"UHcCcStmZLy83spqICPLAYER_PAGE_HEIGHT_MODIFICATIONS\\\":\\\"[]\\\"}\", \"score\":\"{\\\"GRVMoAQGAZ7wRE0L\\\":\\\"{\\\\\\\"score\\\\\\\":\\\\\\\"1698\\\\\\\", \\\\\\\"maxScore\\\\\\\":\\\\\\\"6008\\\\\\\", \\\\\\\"checkCount\\\\\\\":\\\\\\\"0\\\\\\\", \\\\\\\"errorCount\\\\\\\":\\\\\\\"12\\\\\\\", \\\\\\\"mistakeCount\\\\\\\":\\\\\\\"0\\\\\\\", \\\\\\\"weight\\\\\\\":\\\\\\\"1\\\\\\\"}\\\"}\", \"time\":\"{\\\"pages_times\\\":\\\"{\\\\\\\"GRVMoAQGAZ7wRE0L\\\\\\\":\\\\\\\"173661\\\\\\\"}\\\"}\", \"isReportable\":\"{}\", \"adaptiveLearning\":\"{\\\"currentPageIndex\\\":\\\"0\\\", \\\"visitiedPageIndexes\\\":\\\"[0]\\\"}\", \"visitedPages\":\"GRVMoAQGAZ7wRE0L\"}",
        "cmi.success_status": "unknown",
        "cmi.exit": "suspend",
        "cmi.score.min": "0",
        "cmi.score.raw": "28",
        "cmi.completion_status": "incomplete",
        "cmi.score.scaled": "0,28"
      },
      //*/
      /*
      'articulate': {
        'cmi.suspend_data': { "estado": "incompleto", "valores": { "resp_01": "Mi reino por un caballo.", "resp_02": "Crear herramientas con la imaginación." } },
        'cmi.completion_status': "incomplete",
        'cmi.success_status': 'unknown'
      },
      //*/
      //*
      'articulate': {
        'cmi.suspend_data': {},
        'cmi.completion_status': "",
        'cmi.success_status': ''
      },
      //*/
      'clic': { 'cmi.suspend_data': 'Datos dummy' }
    };
    // Las rutas URL relativas que cargan el mAuthor o el Articulate
    const rutas = {
      'mauthor': 'mauthor/Recurso700/index.html&tipo=mauthor',
      'articulate': 'articulate/Recurso130/index_lms.html&tipo=articulate',
      'clic': 'clic/story.html&tipo=clic'
    };
    const rutaWrapper = 'paquetes/wrapper/wrapper.html?ruta=../';
    // El iframe que contiene el recurso, que se crea dinámicamente y que envía el postMessage apenas se carga.
    creaIframe();
    function creaIframe() {
      const iframe = document.createElement('iframe');
      iframe.onload = cargaIframe(iframe);
      iframe.src = rutaWrapper + rutas[recurso];
      document.body.appendChild(iframe);
    }
    function cargaIframe(iframe) {
      // Se tiene que esperar a cargar el iframe, pero no se puede enviar el postMessage después de cargadas las variables iniciales.
      const interval = setInterval(() => {
        if (iframe.contentWindow) {
          clearInterval(interval);
          // Como parte de la prueba, se aplaza el envío de los datos por 5 segundos para ver si todo funciona bien.
          setTimeout(() => {
            // El objeto que se pase debe tener el cmi.suspend_data (y cualquier conjunto de atributos) en la raíz para ser reconocido
            console.log('PARENT: Envío ', obj[recurso]);
            iframe.contentWindow.postMessage(obj[recurso], '*');
          }, 500);
        }
      }, 100);
    }
    // Un listener normal que detecta el 'message' que es enviado desde el interceptor y, luego, hace algo con él.
    window.addEventListener(
      "message",
      (event) => {
        console.log('PARENT: ', event.data);
        /* Hago algo con el event.data que contiene las variables cmi que me envía el usuario */
      },
      false
    );
    function cambiaRecurso(num) {
      const iframe = document.getElementsByTagName('iframe')[0];
      document.body.removeChild(iframe);
      recurso = recursos[num];
      creaIframe();
    }
  </script>
</body>

</html>