<!DOCTYPE html>
<html lang="es">

<head>
  <title>Parent ejemplo</title>
  <style>
    body {
      margin: 0;
    }

    iframe {
      width: 100vw;
      height: 100vh;
      border: none;
    }
  </style>
</head>

<body>
  <script>
    // Los tipos de ejemplo
    const recursos = ['mauthor', 'articulate', 'clic'];
    // 0 = mAuthor, 1 = Articulate
    let recurso = recursos[2];
    // Un objeto de ejemplo con las tres variables básicas que está esperando el mAuthor y el Articulate. Vienen desde el Backend
    const obj = {
      'mauthor': {
        'cmi.suspend_data': { "state": "{\"GRVMoAQGAZ7wRE0Lpage_navigation_page_anchor10\":\"{\\\"isVisible\\\":true}\", \"GRVMoAQGAZ7wRE0Lpage_navigation_page_anchor9\":\"{\\\"isVisible\\\":true}\", \"GRVMoAQGAZ7wRE0Lpage_navigation_page_anchor8\":\"{\\\"isVisible\\\":true}\", \"GRVMoAQGAZ7wRE0Lpage_navigation_page_anchor7\":\"{\\\"isVisible\\\":true}\", \"GRVMoAQGAZ7wRE0Lpage_navigation_page_anchor6\":\"{\\\"isVisible\\\":true}\", \"GRVMoAQGAZ7wRE0Lpage_navigation_page_anchor5\":\"{\\\"isVisible\\\":true}\", \"GRVMoAQGAZ7wRE0Lpage_navigation_page_anchor4\":\"{\\\"isVisible\\\":true}\", \"GRVMoAQGAZ7wRE0Lpage_navigation_page_anchor3\":\"{\\\"isVisible\\\":true}\", \"GRVMoAQGAZ7wRE0Lpage_navigation_page_anchor2\":\"{\\\"isVisible\\\":true}\", \"GRVMoAQGAZ7wRE0Lpage_navigation_page_anchor1\":\"{\\\"isVisible\\\":true}\", \"GRVMoAQGAZ7wRE0LText2\":\"{\\\"gapUniqueId\\\":\\\"4Kq7rg\\\", \\\"values\\\":\\\"{}\\\", \\\"consumed\\\":\\\"{}\\\", \\\"disabled\\\":\\\"[]\\\", \\\"isVisible\\\":\\\"true\\\", \\\"droppedElements\\\":\\\"{}\\\", \\\"hasBeenAccessed\\\":\\\"{}\\\"}\", \"GRVMoAQGAZ7wRE0LText40\":\"{\\\"gapUniqueId\\\":\\\"03Ses3\\\", \\\"values\\\":\\\"{}\\\", \\\"consumed\\\":\\\"{}\\\", \\\"disabled\\\":\\\"[]\\\", \\\"isVisible\\\":\\\"true\\\", \\\"droppedElements\\\":\\\"{}\\\", \\\"hasBeenAccessed\\\":\\\"{}\\\"}\", \"GRVMoAQGAZ7wRE0LText3\":\"{\\\"gapUniqueId\\\":\\\"RHUvxn\\\", \\\"values\\\":\\\"{}\\\", \\\"consumed\\\":\\\"{}\\\", \\\"disabled\\\":\\\"[]\\\", \\\"isVisible\\\":\\\"true\\\", \\\"droppedElements\\\":\\\"{}\\\", \\\"hasBeenAccessed\\\":\\\"{}\\\"}\", \"GRVMoAQGAZ7wRE0LText36\":\"{\\\"gapUniqueId\\\":\\\"sJvhpf\\\", \\\"values\\\":\\\"{}\\\", \\\"consumed\\\":\\\"{}\\\", \\\"disabled\\\":\\\"[]\\\", \\\"isVisible\\\":\\\"true\\\", \\\"droppedElements\\\":\\\"{}\\\", \\\"hasBeenAccessed\\\":\\\"{}\\\"}\", \"GRVMoAQGAZ7wRE0LShape12\":\"{\\\"isVisible\\\":\\\"true\\\"}\", \"GRVMoAQGAZ7wRE0LText8\":\"{\\\"gapUniqueId\\\":\\\"9tUNQK\\\", \\\"values\\\":\\\"{}\\\", \\\"consumed\\\":\\\"{}\\\", \\\"disabled\\\":\\\"[]\\\", \\\"isVisible\\\":\\\"true\\\", \\\"droppedElements\\\":\\\"{}\\\", \\\"hasBeenAccessed\\\":\\\"{}\\\"}\", \"GRVMoAQGAZ7wRE0LAdvanced_Connector2\":\"\", \"GRVMoAQGAZ7wRE0LShape2\":\"{\\\"isVisible\\\":\\\"true\\\"}\", \"GRVMoAQGAZ7wRE0LShape8\":\"{\\\"isVisible\\\":\\\"true\\\"}\", \"GRVMoAQGAZ7wRE0LConnection1\":\"{\\\"id\\\":[\\\"1:a\\\",\\\"5:e\\\",\\\"2:b\\\",\\\"4:d\\\",\\\"3:c\\\",\\\"6:f\\\"],\\\"isVisible\\\":true}\", \"GRVMoAQGAZ7wRE0LText9\":\"{\\\"gapUniqueId\\\":\\\"wL5yk5\\\", \\\"values\\\":\\\"{}\\\", \\\"consumed\\\":\\\"{}\\\", \\\"disabled\\\":\\\"[]\\\", \\\"isVisible\\\":\\\"true\\\", \\\"droppedElements\\\":\\\"{}\\\", \\\"hasBeenAccessed\\\":\\\"{}\\\"}\", \"GRVMoAQGAZ7wRE0LChoice2\":\"{\\\"options\\\":\\\"10001\\\", \\\"isDisabled\\\":\\\"false\\\", \\\"isVisible\\\":\\\"true\\\"}\", \"GRVMoAQGAZ7wRE0LokA\":\"{\\\"isSelected\\\":false,\\\"isVisible\\\":false,\\\"isDisabled\\\":false}\", \"GRVMoAQGAZ7wRE0LText12\":\"{\\\"gapUniqueId\\\":\\\"eUWOMw\\\", \\\"values\\\":\\\"{}\\\", \\\"consumed\\\":\\\"{}\\\", \\\"disabled\\\":\\\"[]\\\", \\\"isVisible\\\":\\\"true\\\", \\\"droppedElements\\\":\\\"{}\\\", \\\"hasBeenAccessed\\\":\\\"{}\\\"}\", \"GRVMoAQGAZ7wRE0LChoice3\":\"{\\\"options\\\":\\\"000000\\\", \\\"isDisabled\\\":\\\"false\\\", \\\"isVisible\\\":\\\"true\\\"}\", \"GRVMoAQGAZ7wRE0LokB\":\"{\\\"isSelected\\\":false,\\\"isVisible\\\":false,\\\"isDisabled\\\":false}\", \"GRVMoAQGAZ7wRE0LAdvanced_Connector3\":\"\", \"GRVMoAQGAZ7wRE0LText6\":\"{\\\"gapUniqueId\\\":\\\"ptcDG3\\\", \\\"values\\\":\\\"{}\\\", \\\"consumed\\\":\\\"{}\\\", \\\"disabled\\\":\\\"[]\\\", \\\"isVisible\\\":\\\"true\\\", \\\"droppedElements\\\":\\\"{}\\\", \\\"hasBeenAccessed\\\":\\\"{}\\\"}\", \"GRVMoAQGAZ7wRE0LText1\":\"{\\\"gapUniqueId\\\":\\\"5n7N3g\\\", \\\"values\\\":\\\"{}\\\", \\\"consumed\\\":\\\"{}\\\", \\\"disabled\\\":\\\"[]\\\", \\\"isVisible\\\":\\\"true\\\", \\\"droppedElements\\\":\\\"{}\\\", \\\"hasBeenAccessed\\\":\\\"{}\\\"}\", \"GRVMoAQGAZ7wRE0LChoice4\":\"{\\\"options\\\":\\\"0100\\\", \\\"isDisabled\\\":\\\"false\\\", \\\"isVisible\\\":\\\"true\\\"}\", \"GRVMoAQGAZ7wRE0LAdvanced_Connector4\":\"\", \"GRVMoAQGAZ7wRE0LokD\":\"{\\\"isSelected\\\":true,\\\"isVisible\\\":false,\\\"isDisabled\\\":false}\", \"GRVMoAQGAZ7wRE0LShape18\":\"{\\\"isVisible\\\":\\\"true\\\"}\", \"GRVMoAQGAZ7wRE0LShape10\":\"{\\\"isVisible\\\":\\\"true\\\"}\", \"GRVMoAQGAZ7wRE0LShape11\":\"{\\\"isVisible\\\":\\\"true\\\"}\", \"GRVMoAQGAZ7wRE0LShape19\":\"{\\\"isVisible\\\":\\\"true\\\"}\", \"GRVMoAQGAZ7wRE0LShape20\":\"{\\\"isVisible\\\":\\\"true\\\"}\", \"GRVMoAQGAZ7wRE0LShape22\":\"{\\\"isVisible\\\":\\\"true\\\"}\", \"GRVMoAQGAZ7wRE0LShape23\":\"{\\\"isVisible\\\":\\\"true\\\"}\", \"GRVMoAQGAZ7wRE0LShape24\":\"{\\\"isVisible\\\":\\\"true\\\"}\", \"GRVMoAQGAZ7wRE0LText11\":\"{\\\"gapUniqueId\\\":\\\"Mc3WCf\\\", \\\"values\\\":\\\"{\\\\\\\"Mc3WCf-2\\\\\\\":\\\\\\\"5000\\\\\\\", \\\\\\\"Mc3WCf-3\\\\\\\":\\\\\\\"agricultura\\\\\\\", \\\\\\\"Mc3WCf-4\\\\\\\":\\\\\\\"nómadas\\\\\\\", \\\\\\\"Mc3WCf-5\\\\\\\":\\\\\\\"alimentos\\\\\\\", \\\\\\\"Mc3WCf-6\\\\\\\":\\\\\\\"número\\\\\\\", \\\\\\\"Mc3WCf-7\\\\\\\":\\\\\\\"seguridad\\\\\\\", \\\\\\\"Mc3WCf-8\\\\\\\":\\\\\\\"poblados\\\\\\\", \\\\\\\"Mc3WCf-1\\\\\\\":\\\\\\\"revolución\\\\\\\"}\\\", \\\"consumed\\\":\\\"{\\\\\\\"Mc3WCf-2\\\\\\\":\\\\\\\"Source_list5-2@5000\\\\\\\", \\\\\\\"Mc3WCf-3\\\\\\\":\\\\\\\"Source_list5-3@agricultura\\\\\\\", \\\\\\\"Mc3WCf-4\\\\\\\":\\\\\\\"Source_list5-4@nómadas\\\\\\\", \\\\\\\"Mc3WCf-5\\\\\\\":\\\\\\\"Source_list5-5@alimentos\\\\\\\", \\\\\\\"Mc3WCf-6\\\\\\\":\\\\\\\"Source_list5-6@número\\\\\\\", \\\\\\\"Mc3WCf-7\\\\\\\":\\\\\\\"Source_list5-7@seguridad\\\\\\\", \\\\\\\"Mc3WCf-8\\\\\\\":\\\\\\\"Source_list5-8@poblados\\\\\\\", \\\\\\\"Mc3WCf-1\\\\\\\":\\\\\\\"Source_list5-1@revolución\\\\\\\"}\\\", \\\"disabled\\\":\\\"[false,false,false,false,false,false,false,false]\\\", \\\"isVisible\\\":\\\"true\\\", \\\"droppedElements\\\":\\\"{\\\\\\\"Mc3WCf-1\\\\\\\":\\\\\\\"&lt;div class=&quot;ic_sourceListItem ui-draggable ic_sourceListItem-selected ui-draggable-dragging&quot; style=&quot;display: inline-block; white-space: nowrap; position: absolute; z-index: 100; width: 195px; height: 25px; left: -420px; top: 255px;&quot;&gt;revolución&lt;/div&gt;\\\\\\\", \\\\\\\"Mc3WCf-2\\\\\\\":\\\\\\\"&lt;div class=&quot;ic_sourceListItem ui-draggable ic_sourceListItem-selected ui-draggable-dragging&quot; style=&quot;display: inline-block; white-space: nowrap; position: absolute; z-index: 100; width: 195px; height: 25px; left: 80px; top: 264px;&quot;&gt;5000&lt;/div&gt;\\\\\\\", \\\\\\\"Mc3WCf-3\\\\\\\":\\\\\\\"&lt;div class=&quot;ic_sourceListItem ui-draggable ic_sourceListItem-selected ui-draggable-dragging&quot; style=&quot;display: inline-block; white-space: nowrap; position: absolute; z-index: 100; width: 195px; height: 25px; left: -78px; top: 303px;&quot;&gt;agricultura&lt;/div&gt;\\\\\\\", \\\\\\\"Mc3WCf-4\\\\\\\":\\\\\\\"&lt;div class=&quot;ic_sourceListItem ui-draggable ic_sourceListItem-selected ui-draggable-dragging&quot; style=&quot;display: inline-block; white-space: nowrap; position: absolute; z-index: 100; width: 195px; height: 25px; left: -418px; top: 345px;&quot;&gt;nómadas&lt;/div&gt;\\\\\\\", \\\\\\\"Mc3WCf-5\\\\\\\":\\\\\\\"&lt;div class=&quot;ic_sourceListItem ui-draggable ic_sourceListItem-selected ui-draggable-dragging&quot; style=&quot;display: inline-block; white-space: nowrap; position: absolute; z-index: 100; width: 195px; height: 25px; left: 83px; top: 347px;&quot;&gt;alimentos&lt;/div&gt;\\\\\\\", \\\\\\\"Mc3WCf-6\\\\\\\":\\\\\\\"&lt;div class=&quot;ic_sourceListItem ui-draggable ic_sourceListItem-selected ui-draggable-dragging&quot; style=&quot;display: inline-block; white-space: nowrap; position: absolute; z-index: 100; width: 195px; height: 25px; left: -457px; top: 396px;&quot;&gt;número&lt;/div&gt;\\\\\\\", \\\\\\\"Mc3WCf-7\\\\\\\":\\\\\\\"&lt;div class=&quot;ic_sourceListItem ui-draggable ic_sourceListItem-selected ui-draggable-dragging&quot; style=&quot;display: inline-block; white-space: nowrap; position: absolute; z-index: 100; width: 195px; height: 25px; left: 85px; top: 390px;&quot;&gt;seguridad&lt;/div&gt;\\\\\\\", \\\\\\\"Mc3WCf-8\\\\\\\":\\\\\\\"&lt;div class=&quot;ic_sourceListItem ui-draggable ic_sourceListItem-selected ui-draggable-dragging&quot; style=&quot;display: inline-block; white-space: nowrap; position: absolute; z-index: 100; width: 195px; height: 25px; left: -422px; top: 494px;&quot;&gt;poblados&lt;/div&gt;\\\\\\\"}\\\", \\\"hasBeenAccessed\\\":\\\"{}\\\"}\", \"GRVMoAQGAZ7wRE0LSource_list5\":\"{\\\"stateVersion\\\":\\\"1\\\", \\\"isVisible\\\":\\\"true\\\", \\\"items\\\":\\\"[]\\\"}\", \"GRVMoAQGAZ7wRE0LShape32\":\"{\\\"isVisible\\\":\\\"true\\\"}\", \"GRVMoAQGAZ7wRE0LText15\":\"{\\\"gapUniqueId\\\":\\\"Ll1YIg\\\", \\\"values\\\":\\\"{}\\\", \\\"consumed\\\":\\\"{}\\\", \\\"disabled\\\":\\\"[]\\\", \\\"isVisible\\\":\\\"true\\\", \\\"droppedElements\\\":\\\"{}\\\", \\\"hasBeenAccessed\\\":\\\"{}\\\"}\", \"GRVMoAQGAZ7wRE0LText18\":\"{\\\"gapUniqueId\\\":\\\"GCzZyr\\\", \\\"values\\\":\\\"{}\\\", \\\"consumed\\\":\\\"{}\\\", \\\"disabled\\\":\\\"[]\\\", \\\"isVisible\\\":\\\"true\\\", \\\"droppedElements\\\":\\\"{}\\\", \\\"hasBeenAccessed\\\":\\\"{}\\\"}\", \"GRVMoAQGAZ7wRE0LLine1\":\"{\\\"isVisible\\\":true}\", \"GRVMoAQGAZ7wRE0Lmultiplegap1\":\"{\\\"placeholders\\\":[],\\\"isVisible\\\":true}\", \"GRVMoAQGAZ7wRE0Lmultiplegap2\":\"{\\\"placeholders\\\":[],\\\"isVisible\\\":true}\", \"GRVMoAQGAZ7wRE0LShape33\":\"{\\\"isVisible\\\":\\\"true\\\"}\", \"GRVMoAQGAZ7wRE0LText4\":\"{\\\"gapUniqueId\\\":\\\"zhThwe\\\", \\\"values\\\":\\\"{}\\\", \\\"consumed\\\":\\\"{}\\\", \\\"disabled\\\":\\\"[]\\\", \\\"isVisible\\\":\\\"true\\\", \\\"droppedElements\\\":\\\"{}\\\", \\\"hasBeenAccessed\\\":\\\"{}\\\"}\", \"GRVMoAQGAZ7wRE0LImage1\":\"true\", \"GRVMoAQGAZ7wRE0Lmultiplegap3\":\"{\\\"placeholders\\\":[],\\\"isVisible\\\":true}\", \"GRVMoAQGAZ7wRE0LLine2\":\"{\\\"isVisible\\\":true}\", \"GRVMoAQGAZ7wRE0LText5\":\"{\\\"gapUniqueId\\\":\\\"b9UFJL\\\", \\\"values\\\":\\\"{}\\\", \\\"consumed\\\":\\\"{}\\\", \\\"disabled\\\":\\\"[]\\\", \\\"isVisible\\\":\\\"true\\\", \\\"droppedElements\\\":\\\"{}\\\", \\\"hasBeenAccessed\\\":\\\"{}\\\"}\", \"GRVMoAQGAZ7wRE0LImage2\":\"true\", \"GRVMoAQGAZ7wRE0LParagraph1\":\"{\\\"tinymceState\\\":\\\"<p style=\\\\\\\"font-size: 20px;\\\\\\\">Un paisaje de piedras a la orilla del mar.</p>\\\",\\\"isVisible\\\":true,\\\"isLocked\\\":false}\", \"GRVMoAQGAZ7wRE0LParagraph2\":\"{\\\"tinymceState\\\":\\\"<p style=\\\\\\\"font-size: 20px;\\\\\\\">Cinco inventos de la prehistoria.</p>\\\",\\\"isVisible\\\":true,\\\"isLocked\\\":false}\", \"GRVMoAQGAZ7wRE0LText7\":\"{\\\"gapUniqueId\\\":\\\"70Pux6\\\", \\\"values\\\":\\\"{}\\\", \\\"consumed\\\":\\\"{}\\\", \\\"disabled\\\":\\\"[]\\\", \\\"isVisible\\\":\\\"true\\\", \\\"droppedElements\\\":\\\"{}\\\", \\\"hasBeenAccessed\\\":\\\"{}\\\"}\", \"GRVMoAQGAZ7wRE0LText10\":\"{\\\"gapUniqueId\\\":\\\"8AeoWr\\\", \\\"values\\\":\\\"{}\\\", \\\"consumed\\\":\\\"{}\\\", \\\"disabled\\\":\\\"[]\\\", \\\"isVisible\\\":\\\"true\\\", \\\"droppedElements\\\":\\\"{}\\\", \\\"hasBeenAccessed\\\":\\\"{}\\\"}\", \"GRVMoAQGAZ7wRE0LParagraph3\":\"{\\\"tinymceState\\\":\\\"<p style=\\\\\\\"font-size: 20px;\\\\\\\">Las mujeres y el patriarcado.</p>\\\",\\\"isVisible\\\":true,\\\"isLocked\\\":false}\", \"GRVMoAQGAZ7wRE0LParagraph4\":\"{\\\"tinymceState\\\":\\\"<p style=\\\\\\\"font-size: 20px;\\\\\\\"><br data-mce-bogus=\\\\\\\"1\\\\\\\"></p><placeholder class=\\\\\\\"placeholder\\\\\\\" style=\\\\\\\"position: absolute; top: 5px; left: 0px; color: rgb(136, 136, 136); padding: 1%; width: 98%; overflow: hidden; font-size: 20px;\\\\\\\">Escribe aquí</placeholder>\\\",\\\"isVisible\\\":true,\\\"isLocked\\\":false}\", \"GRVMoAQGAZ7wRE0LShape1\":\"{\\\"isVisible\\\":\\\"true\\\"}\", \"GRVMoAQGAZ7wRE0LShape3\":\"{\\\"isVisible\\\":\\\"true\\\"}\", \"GRVMoAQGAZ7wRE0LShape4\":\"{\\\"isVisible\\\":\\\"true\\\"}\", \"GRVMoAQGAZ7wRE0LShape5\":\"{\\\"isVisible\\\":\\\"true\\\"}\", \"GRVMoAQGAZ7wRE0LShape6\":\"{\\\"isVisible\\\":\\\"true\\\"}\", \"GRVMoAQGAZ7wRE0LShape7\":\"{\\\"isVisible\\\":\\\"true\\\"}\", \"GRVMoAQGAZ7wRE0LShape9\":\"{\\\"isVisible\\\":\\\"true\\\"}\", \"GRVMoAQGAZ7wRE0LShape14\":\"{\\\"isVisible\\\":\\\"true\\\"}\", \"GRVMoAQGAZ7wRE0LSource_list1\":\"{\\\"stateVersion\\\":\\\"1\\\", \\\"isVisible\\\":\\\"true\\\", \\\"items\\\":\\\"[\\\\\\\"Source_list1-4\\\\\\\",\\\\\\\"Source_list1-7\\\\\\\",\\\\\\\"Source_list1-1\\\\\\\",\\\\\\\"Source_list1-3\\\\\\\",\\\\\\\"Source_list1-5\\\\\\\",\\\\\\\"Source_list1-2\\\\\\\",\\\\\\\"Source_list1-8\\\\\\\",\\\\\\\"Source_list1-9\\\\\\\",\\\\\\\"Source_list1-6\\\\\\\"]\\\"}\", \"GRVMoAQGAZ7wRE0LGroup8\":\"true\", \"GRVMoAQGAZ7wRE0LGroup9\":\"true\", \"GRVMoAQGAZ7wRE0LGroup10\":\"true\", \"GRVMoAQGAZ7wRE0LGroup1\":\"true\", \"GRVMoAQGAZ7wRE0LGroup0\":\"true\", \"GRVMoAQGAZ7wRE0LGroup2\":\"true\", \"GRVMoAQGAZ7wRE0LICPLAYER_PAGE_HEIGHT_MODIFICATIONS\":\"[]\", \"K9YA29VowVIJxYL9Title\":\"{\\\"gapUniqueId\\\":\\\"DeMXFQ\\\", \\\"values\\\":\\\"{}\\\", \\\"consumed\\\":\\\"{}\\\", \\\"disabled\\\":\\\"[]\\\", \\\"isVisible\\\":\\\"false\\\", \\\"droppedElements\\\":\\\"{}\\\", \\\"hasBeenAccessed\\\":\\\"{}\\\"}\", \"K9YA29VowVIJxYL9__navigation_bar_anchor\":\"{\\\"bookmarks\\\":[]}\", \"K9YA29VowVIJxYL9template_commons_util1\":\"\", \"K9YA29VowVIJxYL9ICPLAYER_PAGE_HEIGHT_MODIFICATIONS\":\"[]\", \"UHcCcStmZLy83spq__disable_show_answers\":\"{\\\"isVisible\\\":\\\"true\\\"}\", \"UHcCcStmZLy83spq__disable_reset\":\"{\\\"isVisible\\\":\\\"true\\\"}\", \"UHcCcStmZLy83spq__disable_save\":\"{\\\"isVisible\\\":\\\"false\\\"}\", \"UHcCcStmZLy83spq__disable_check\":\"{\\\"isVisible\\\":\\\"false\\\"}\", \"UHcCcStmZLy83spq__open_report\":\"{\\\"isVisible\\\":\\\"false\\\"}\", \"UHcCcStmZLy83spq__open_feedback\":\"{\\\"isVisible\\\":false,\\\"isSelected\\\":false,\\\"isDisabled\\\":true}\", \"UHcCcStmZLy83spq__show_answers\":\"{\\\"isVisible\\\":false}\", \"UHcCcStmZLy83spq__reset\":\"{\\\"isVisible\\\":\\\"false\\\"}\", \"UHcCcStmZLy83spq__save\":\"{\\\"isVisible\\\":true,\\\"isDisabled\\\":false}\", \"UHcCcStmZLy83spq__check\":\"{\\\"isVisible\\\":\\\"true\\\"}\", \"UHcCcStmZLy83spq__scroll_top\":\"true\", \"UHcCcStmZLy83spq__disable_area\":\"{\\\"isVisible\\\":\\\"false\\\"}\", \"UHcCcStmZLy83spqConnector_Footer\":\"\", \"UHcCcStmZLy83spqICPLAYER_PAGE_HEIGHT_MODIFICATIONS\":\"[]\"}", "score": "{\"GRVMoAQGAZ7wRE0L\":\"{\\\"score\\\":\\\"3003\\\", \\\"maxScore\\\":\\\"6008\\\", \\\"checkCount\\\":\\\"0\\\", \\\"errorCount\\\":\\\"0\\\", \\\"mistakeCount\\\":\\\"0\\\", \\\"weight\\\":\\\"1\\\"}\"}", "time": "{\"pages_times\":\"{\\\"GRVMoAQGAZ7wRE0L\\\":\\\"110630\\\"}\"}", "isReportable": "{}", "adaptiveLearning": "{\"currentPageIndex\":\"0\", \"visitiedPageIndexes\":\"[0]\"}", "visitedPages": "GRVMoAQGAZ7wRE0L" },
        'cmi.completion_status': "incomplete",
        'cmi.location': 0
      },
      'articulate': {
        'cmi.suspend_data': { "estado": "incompleto", "valores": { "resp_01": "Mi reino por un caballo.", "resp_02": "Crear herramientas con la imaginación." } },
        'cmi.completion_status': "incomplete",
        'cmi.success_status': 'unknown'
      },
      'clic': { 'cmi.suspend_data': 'Datos dummy' }
    };
    // Las rutas URL relativas que cargan el mAuthor o el Articulate
    const rutas = {
      'mauthor': 'paquetes/mauthor/Recurso700/wrapper.html',
      'articulate': 'paquetes/articulate/Recurso130/wrapper.html',
      'clic': 'paquetes/clic/wrapper.html'
    };
    // El iframe que contiene el recurso, que se crea dinámicamente y que envía el postMessage apenas se carga.
    const iframe = document.createElement('iframe');
    iframe.onload = cargaIframe();
    iframe.src = rutas[recurso];
    document.body.appendChild(iframe);
    function cargaIframe() {
      // Se tiene que esperar a cargar el iframe, pero no se puede enviar el postMessage después de cargadas las variables iniciales.
      const interval = setInterval(() => {
        if (iframe.contentWindow) {
          clearInterval(interval);
          // Como parte de la prueba, se aplaza el envío de los datos por 5 segundos para ver si todo funciona bien.
          setTimeout(() => {
            // El objeto que se pase debe tener el cmi.suspend_data (y cualquier conjunto de atributos) en la raíz para ser reconocido
            console.log('Envío ', obj[recurso]);
            iframe.contentWindow.postMessage(obj[recurso], '*');
          }, 500);
        }
      }, 100);
    }
    // Un listener normal que detecta el 'message' que es enviado desde el interceptor y, luego, hace algo con él.
    window.addEventListener(
      "message",
      (event) => {
        console.log('PARENT: ', event.data);
        /* Hago algo con el event.data que contiene las variables cmi que me envía el usuario */
      },
      false
    );
  </script>
</body>

</html>